<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Марина Варфоломеева" />


<title>Знакомство с R</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="my_styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Proteomics course</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Начало</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Конспект
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="00_introduction.html">О модуле Анализ протеомных данных</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="01_introduction_to_r.html">Знакомство с R</a>
    </li>
    <li>
      <a href="02_data_preprocessing.html">Предварительная обработка данных</a>
    </li>
    <li>
      <a href="03_classification.html">Классификация</a>
    </li>
    <li>
      <a href="04_differential_expression_analysis.html">Дифференциальная экспрессия</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="protocol.html">Протокол анализа данных</a>
    </li>
  </ul>
</li>
<li>
  <a href="resources.html">Ссылки и ресурсы</a>
</li>
<li>
  <a href="coding_practices.html">Правила хорошего кода</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Знакомство с R</h1>
<h4 class="author">Марина Варфоломеева</h4>

</div>


<hr />
<div id="данные-к-этому-занятию" class="section level1">
<h1>Данные к этому занятию</h1>
<ul>
<li><a href="https://varmara.github.io/proteomics/01_introduction_to_r.R">Код</a></li>
<li>Данные <span class="citation">(Kikuta et al. 2009)</span>:
<ul>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.csv">expression_3.csv</a></li>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.xlsx">expression_3.xlsx</a></li>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.zip">expression_3.zip</a></li>
</ul></li>
</ul>
<hr />
</div>
<div id="как-появился-r" class="section level1">
<h1>Как появился R</h1>
<p>R <span class="citation">(R Core Team 2021)</span> — это язык для статистического анализа и визуализации данных. Он возник как ответвление языка S/Splus, разработанного еще в 70-х годах в Bell Laboratories.</p>
<p><img src="images/Rlogo.svg" width=150px alt="R logo"></p>
<hr />
<p><a href="https://en.wikipedia.org/wiki/Ross_Ihaka">Росс Ихака</a> (Ross Ihaka) и <a href="https://en.wikipedia.org/wiki/Robert_Gentleman_(statistician)">Роберт Джентльмен</a> (Robert Gentleman), молодые ученые из университета Окленда, Новая Зеландия разработали R в 1993 году <span class="citation">(Ihaka 1998)</span>.</p>
<p><img src="images/Robert_Gentleman_and_Ross_Ihaka.png" alt="Роберт Джентльмен и Росс Ихака"></p>
<p><small>Роберт Джентльмен и Росс Ихака, <a href="https://www.stat.auckland.ac.nz/~ihaka/downloads/the-r-project.pdf">источник: Росс Ихака</a></small></p>
<hr />
<p>Сейчас Росс Ихака занимается статистикой <a href="https://www.stat.auckland.ac.nz/~ihaka/">в университете Окленда</a> (Associate Professor). В 2010 году Ихака начал работать над новым языком с целью усовершенствовать R и улучшить его быстродействие <span class="citation">(Ihaka 2010)</span>.</p>
<p><img src="images/Ihaka.jpg" alt="Росс Ихака" style="height:250px;"></p>
<p><small>Росс Ихака, <a href="http://www.waikato.ac.nz/news-events/media/2015/learning-another-language-on-kngitanga-day">источник: сайт university of Waikato</a></small></p>
<hr />
<p>Роберт Джентльмен работал как ученый и эксперт в нескольких компаниях биотехнологического и генетического профиля, и недавно стал вицепрезидентом компании 23andMe как эксперт в биоинформатике. Еще в 2001 году Роберт Джентльмен начал работать над проектом <a href="http://www.bioconductor.org/">Bioconductor</a>.</p>
<p><img src="images/Bioconductor-logo.jpg" alt="Bioconductor logo" style="width:200px;"></p>
<p><img src="images/Gentleman.jpg" alt="Роберт Джентльмен" style="height:250px;"></p>
<p><small>Роберт Джентльмен, <a href="https://www.fredhutch.org/en/news/center-news/2009/05/Gentlemen-presents-lecture.html">источник: Susie Fitzhugh</a></small></p>
</div>
<div id="rstudio-среда-разработки" class="section level1">
<h1>RStudio — среда разработки</h1>
<div id="создатели-rstudio" class="section level2">
<h2>Создатели RStudio</h2>
<p>RStudio <span class="citation">(RStudio Team 2019)</span> — это свободно распространяемая среда для разработки (integrated development environment) на языке R.</p>
<p><img src="images/RStudio-logo.png"></p>
<p>RStudio была основана в 2009 году американским программистом и интернет-предпринимателем <a href="https://en.wikipedia.org/wiki/Joseph_J._Allaire">Джозефом Аллером</a> (Joseph J. Allaire). Среду RStudio можно устанавливать на компьютеры с разными операционными системами (Windows, OS X, and Linux).</p>
<p><img src="images/Jeremy_Allaire_by_Hubert_Burda_Media_on_Flickr.jpg" alt="Джозеф Аллер" style="height:250px;"></p>
<p><small>Джозеф Аллер, <a href="https://flic.kr/p/jn7JDS">источник: Hubert Burda Media on Flickr</a></small></p>
<p>Сейчас RStudio, пожалуй, самый удобный вариант среды для разработки на R. Мне кажется, что бум использования R в начале 10-х годов отчасти объясняется тем, что писать программы стало гораздо удобнее благодаря появлению среды RStudio.</p>
<p>К слову, вторая причина роста популярности R — это появление графического пакета ggplot2 <span class="citation">(Wickham 2016)</span>, написанного <a href="http://hadley.nz/">Хедли Викхемом</a> (Hadley Wickham). Этот пакет во много раз облегчил построение сложных и красивых графиков. С тех пор Хедли Викхем написал еще много полезных пакетов и сейчас работает Chief Scientist в RStudio и Adjunct Professor в университете Окленда.</p>
<p><img src="images/Wickham.jpg" alt="Хедли Викхем" style="height:250px;"></p>
<p><small>Хедли Викхем, <a href="https://twitter.com/hadleywickham">источник: Hadley Wickham</a></small></p>
<p>Для работы над этим курсом вам понадобится установить</p>
<ul>
<li><a href="http://cran.r-project.org/">R</a></li>
<li><a href="https://www.rstudio.com/products/rstudio/download/preview/">RStudio</a></li>
</ul>
</div>
<div id="устройство-rstudio" class="section level2">
<h2>Устройство RStudio</h2>
<p><img src="images/RStudio.png" alt="RStudio"></p>
<p>Окно редактора RStudio разделено на 4 области:</p>
<ol style="list-style-type: decimal">
<li>код (зеленый прямоугольник на схеме) - это обычный текстовый редактор, в котором открывают и редактирут файлы с программами.</li>
<li>консоль/RMarkdown (оранжевый прямоугольник на схеме). На вкладке консоль можно в живом режиме выполнять команды R, если вы не хотите их сохранять в виде программы.</li>
<li>файлы/графики/пакеты/помощь/просмотр (желтый прямоугольник на схеме). На вкладке помощь можно просматривать файлы справки. На вкладке графики будут появляться графики. На вкладке файлы расположен файловый менеджер, который позволяет перемещаться по директориям вашего проекта и компьютера.</li>
<li>среда/история (и еще может быть /Git, если ваш проект под контролем версий) (синий прямоугольник на схеме). На вкладке история есть список всех выполненных команд R. На вкладке среда расположен список объектов, находящихся в памяти.</li>
</ol>
<p><img src="images/RStudio-layout.png" alt="структура RStudio"></p>
</div>
<div id="организация-рабочего-пространства" class="section level2">
<h2>Организация рабочего пространства</h2>
<ol style="list-style-type: decimal">
<li>Создайте папку (например, <code>Proteomics</code>), где будут храниться ВСЕ материалы курса. Например: Мы будем ее называть <strong>рабочей директорией</strong>. В эту папку помещайте ВСЕ файлы с кодом (с расширением .R).</li>
<li>Внутри папки <code>Proteomics</code> создайте папку <code>data</code>, где будут храниться все файлы с данными для анализа.</li>
</ol>
<p>В итоге у вас должно получиться примерно это:</p>
<pre><code>C:\Proteomics\
C:\Proteomics\data\</code></pre>
</div>
<div id="настройка" class="section level2">
<h2>Настройка</h2>
<p>Все настройки RStudio находятся меню Tools -&gt; Global Options</p>
<ul>
<li>Восстановление рабочено пространства из прошлого сеанса — это лучше отменить, т.к. обычно переменные-призраки очень мешают. На вкладке <code>General</code> убираем галочку <code>Restore .RData into workspace at startup</code>, и меняем <code>Save workspace to .RData on exit</code> - <code>Never</code>.</li>
<li>Перенос длинных строк в окне кода — это удобно. На вкладке <code>Code</code> ставим галочку рядом с опцией <code>Soft-wrap R source files</code>.</li>
</ul>
</div>
<div id="клавиатурные-сокращения" class="section level2">
<h2>Клавиатурные сокращения</h2>
<ul>
<li><code>Ctrl + Shift + C</code> - закомментировать/раскомментировать выделенный фрагмент кода.</li>
<li><code>Ctrl + Enter</code> - отправляет строку из текстового редактора в консоль, а если выделить несколько строк, то будет выполнен этот фрагмент кода.</li>
<li><code>Tab</code> или <code>Ctrl + Space</code> - нажмите после того как начали набирать название функции или переменной, и появится список автоподстановки. Это помогает печатать код быстро и с меньшим количеством ошибок.</li>
</ul>
<p>Автоподстановка названий функций начинает работать как только вы ввели несколько первых букв названия функции. Вы можете вызвать ее раньше, если нажмете <code>Tab</code> или <code>Ctrl + Space</code>.</p>
<p><img src="images/autocompletion.png" alt="автоподстановка названий функций в RStudio"></p>
<p>Как только вы полностью ввели название функции и скобки, RStudio автоматически ставит закрывающую скобку и показывает раздел справки Usage для этой функции.</p>
<p><img src="images/autocompletion1.png" alt="автоподстановка аргументов функций в RStudio"></p>
<p>Если вы нажмете <code>Tab</code> или <code>Ctrl + Space</code>, когда курсор находится внутри скобок, то вам покажут список аргументов этой функции с расшифровками их значений из раздела справки Arguments для этой функции.</p>
<p><img src="images/autocompletion2.png" alt="автоподстановка аргументов функций в RStudio"></p>
</div>
</div>
<div id="установка-дополнительных-пакетов" class="section level1">
<h1>Установка дополнительных пакетов</h1>
<p>R — модульная система, он состоит из пакетов. Некоторые пакеты уже установлены, другие придется устанавливать из внешнего репозитория.</p>
<p>Из центрального репозитория <code>R</code> <code>CRAN</code> пакеты можно установить при помощи функции <code>install.packages()</code>, указав имя пакета. Запустите RStudio (с правами администратора, если вы в Windows) и, для начала, установите пакеты <code>ggplot2</code> и <code>readxl</code> — они нам сегодня понадобятся.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Из репозитория CRAN</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span></code></pre></div>
<p>Остальные пакеты мы будем устанавливать по мере необходимости.</p>
<p>Пакеты единожды устанавливаются в локальную библиотеку, затем их нужно активировать для работы один раз за сеанс.</p>
</div>
<div id="основы-языка-r" class="section level1">
<h1>Основы языка R</h1>
<div id="математические-операции" class="section level2">
<h2>Математические операции</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 5
</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dv">36</span> <span class="sc">/</span> <span class="dv">2</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 18
</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span> <span class="sc">*</span> <span class="dv">4</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 28
</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">^</span> <span class="dv">2</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 25
</code></pre>
<p>Для некоторых операций есть специальные функции:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">27</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 5.196152
</code></pre>
<div id="задание-1" class="section level4">
<h4>Задание 1</h4>
<p>Найдите длину гипотенузы прямоугольного треугольника со сторонами 3 и 5 см.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-4">
Решение
</button>
<div id="hide_buttonunnamed-chunk-4" class="collapse">
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">3</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">5</span><span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 5.830952
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-2" class="section level4">
<h4>Задание 2</h4>
<p>Извлеките кубический корень из 27.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-5">
Решение
</button>
<div id="hide_buttonunnamed-chunk-5" class="collapse">
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dv">27</span><span class="sc">^</span>(<span class="dv">1</span> <span class="sc">/</span> <span class="dv">3</span>) <span class="co"># кубический корень</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 3
</code></pre>
</div>
<p><br /></p>
</div>
</div>
<div id="предупреждения-и-ошибки-warnings-and-errors" class="section level2">
<h2>Предупреждения и ошибки (warnings and errors)</h2>
<p>Предупреждения</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">27</span>)</span></code></pre></div>
<pre><code>## Warning in sqrt(-27): NaNs produced</code></pre>
<pre class="r-output"><code>## [1] NaN
</code></pre>
<p>Ошибки</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqr</span>(<span class="dv">27</span>)</span></code></pre></div>
<pre><code>Error: could not find function &quot;sqr&quot;</code></pre>
</div>
<div id="как-можно-получить-помощь-в-r" class="section level2">
<h2>Как можно получить помощь в R</h2>
<ol style="list-style-type: decimal">
<li>В <code>RStudio</code> можно поставить курсор на название функции и нажать <code>F1</code></li>
</ol>
<p><code>sqrt()</code></p>
<ol start="2" style="list-style-type: decimal">
<li>Перед названием функции можно напечатать знак вопроса и выполнить эту строку</li>
</ol>
<p><code>?sqrt</code></p>
<ol start="3" style="list-style-type: decimal">
<li>Можно воспользоваться функцией <code>help()</code></li>
</ol>
<p><code>help("sqrt")</code></p>
<p>Все файлы справки состоят из нескольких типов разделов.</p>
<p><img src="images/helpstructureannotated.png" alt="Как устроена справка в R"></p>
<div id="задание-3" class="section level3">
<h3>Задание 3</h3>
<p>Что делает функция <code>round()</code>?</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-8">
Решение
</button>
<div id="hide_buttonunnamed-chunk-8" class="collapse">
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Справка</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>?round</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;round&quot;</span>)</span></code></pre></div>
</div>
<p><br /></p>
</div>
<div id="задание-4" class="section level3">
<h3>Задание 4</h3>
<p>Посмотрите в справку к функции <code>log()</code>. Какое основание логарифма используется в R по умолчанию?</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-9">
Решение
</button>
<div id="hide_buttonunnamed-chunk-9" class="collapse">
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Справка</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>?log</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;log&quot;</span>)</span></code></pre></div>
</div>
<p><br /></p>
</div>
</div>
<div id="переменные-variables" class="section level2">
<h2>Переменные (variables)</h2>
<p>Можно сохранить результат любого вычисления или любую величину в переменной. Переменные - это такие контейнеры, в которые можно положить разные данные (и даже функции).</p>
<p>Оператор присваивания это символ стрелочки <code>&lt;-</code> Он работает справа налево, это значит, что значение выражения в его правой части присваивается объекту в левой части. Есть еще более экзотический оператор присваивания слева направо <code>-&gt;</code>, но его не рекомендуют использовать оттого, что хуже читается код.</p>
<p>Имена переменных могут содержать латинские буквы обоих регистров, символы точки . и подчеркивания _ , а так же цифры. Имена переменных должны начинаться с латинских букв. Создавайте понятные и “говорящие” имена переменных.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>num_1 <span class="ot">&lt;-</span> <span class="dv">1024</span> <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>num_1</span></code></pre></div>
<pre class="r-output"><code>## [1] 512
</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1238</span> <span class="sc">*</span> <span class="dv">3</span> <span class="ot">-&gt;</span> num_2  <span class="co"># экзотический вариант</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>num_2</span></code></pre></div>
<pre class="r-output"><code>## [1] 3714
</code></pre>
<p>Правила именования переменных</p>
<p>Просто <code>a</code> — плохо, и даже <code>b</code>, <code>с</code>, или <code>х</code>. Но в некоторых случаях название из одной буквы вполне допустимо:)</p>
<ul>
<li><code>var1</code> — плохо, но уже лучше</li>
<li><code>var_1</code> — тоже плохо, но уже лучше</li>
<li><code>shelllength</code> — говорящее, но плохо читается</li>
<li><code>shell_length</code>, <code>wing_colour</code> или <code>leg_num</code> — хорошие, говорящие, короткие, но вполне читабельные названия.</li>
</ul>
<p>Осторожно, переменные можно случайно или намеренно перезаписать. Пока что <code>num_1</code> было равно 512, но если мы присвоим переменной <code>num_1</code> другое значение — ее содержимое изменится.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>num_1</span></code></pre></div>
<pre class="r-output"><code>## [1] 512
</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>num_1 <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">^</span><span class="dv">2</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>num_1</span></code></pre></div>
<pre class="r-output"><code>## [1] 4
</code></pre>
<p>Код — это линейная последовательность действий. Переменные можно использовать только после того, как они были созданы.</p>
<p>Пример 1</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Неправильно:</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>box_wt <span class="ot">&lt;-</span> <span class="fl">1.2</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>apples <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>box <span class="sc">/</span> apples <span class="co"># ошибка. переменная box еще не была создана.</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># нужная переменная называется box_wt.</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Правильно:</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>box_wt <span class="ot">&lt;-</span> <span class="fl">1.2</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>apples <span class="ot">&lt;-</span> <span class="dv">6</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>box_wt <span class="sc">/</span> apples</span></code></pre></div>
<p>Пример 2</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Неправильно:</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>box <span class="ot">&lt;-</span> <span class="fl">1.3</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>box <span class="sc">/</span> fruits <span class="co"># ошибка. переменная fruits еще не была создана.</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Правильно:</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>box <span class="ot">&lt;-</span> <span class="fl">1.3</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>box <span class="sc">/</span> fruits</span></code></pre></div>
<div id="задание-5" class="section level4">
<h4>Задание 5</h4>
<p>Переставьте строки так, чтобы код можно было выполнить без ошибки.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>distance <span class="ot">&lt;-</span> <span class="dv">120</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>speed <span class="ot">&lt;-</span> distance <span class="sc">/</span> time</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="dv">6</span></span></code></pre></div>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-15">
Решение
</button>
<div id="hide_buttonunnamed-chunk-15" class="collapse">
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>distance <span class="ot">&lt;-</span> <span class="dv">120</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="dv">6</span>                <span class="co"># сначала создаем переменную time</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>speed <span class="ot">&lt;-</span> distance <span class="sc">/</span> time <span class="co"># только потом ее используем</span></span></code></pre></div>
</div>
<p><br /></p>
</div>
<div id="задание-6" class="section level4">
<h4>Задание 6</h4>
<p>Ширина прямоугольника 2 см, а длина на 7 см больше. Чему равен периметр? (В решении создайте и используйте переменные <code>width</code>, <code>len</code> и <code>per</code>).</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-16">
Решение
</button>
<div id="hide_buttonunnamed-chunk-16" class="collapse">
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>width <span class="ot">&lt;-</span> <span class="dv">2</span>               <span class="co"># Ширина</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>len <span class="ot">&lt;-</span> width <span class="sc">+</span> <span class="dv">7</span>         <span class="co"># Длина</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>per <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> (width <span class="sc">+</span> len) <span class="co"># Периметр</span></span></code></pre></div>
</div>
<p><br /></p>
</div>
</div>
<div id="типы-данных-в-r" class="section level2">
<h2>Типы данных в R</h2>
<p>В R всего шесть различных типов данных. Но нам пригодятся только некоторые из них.</p>
<p><img src="images/data-types.png"></p>
<div id="числовые-данные" class="section level3">
<h3>Числовые данные</h3>
<p>Мы только что их видели.</p>
<p>По умолчанию используется тип <code>numeric</code>, который позволяет хранить целые и дробные числа.</p>
<p><img src="images/data-type-numeric.png"></p>
<p>Есть еще тип <code>integer</code>, который предназначен для хранения целых чисел.</p>
<p><img src="images/data-type-integer.png"></p>
<p>И, наконец, тип <code>complex</code> используется для хранения комплексных чисел.</p>
<p><img src="images/data-type-complex.png"></p>
</div>
<div id="текстовые-данные-character" class="section level3">
<h3>Текстовые данные (<code>character</code>)</h3>
<p>Текстовые данные используются для хранения последовательностей символов произвольной длины.</p>
<p><img src="images/data-type-character.png"></p>
<p>Каждый текстовый элемент должен быть окружен кавычками - двойными или одинарными</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;это текст&quot;</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "это текст"
</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;это тоже текст&#39;</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "это тоже текст"
</code></pre>
</div>
<div id="логические-данные-logical" class="section level3">
<h3>Логические данные (<code>logical</code>)</h3>
<p>Логические данные используются для записи значений типа истина/ложь.</p>
<p><img src="images/data-type-logical.png"></p>
<p>В R определены две логические константы: <code>TRUE</code> и <code>FALSE</code></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="co"># истина</span></span></code></pre></div>
<pre class="r-output"><code>## [1] TRUE
</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="co"># ложь</span></span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE
</code></pre>
<p>Для ленивых — если вы вдруг очень спешите, то можно сокращать первыми заглавными буквами. Но лучше так не делать, чтобы читать программы было легче.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>T</span></code></pre></div>
<pre class="r-output"><code>## [1] TRUE
</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>F</span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE
</code></pre>
</div>
<div id="сырые-данные-raw" class="section level3">
<h3>Сырые данные (<code>raw</code>)</h3>
<p>Тип <code>raw</code> используется для хранения “сырых” последовательностей байтов. Это очень экзотический тип, нам он не пригодится.</p>
<p><img src="images/data-type-raw.png"></p>
</div>
<div id="встроенные-в-r-константы" class="section level3">
<h3>Встроенные в R константы</h3>
<p>В R есть несколько встроенных констант. Нам пригодятся только несколько из них.</p>
<p><img src="images/constants.png"></p>
<p><code>NA</code> — англ <em>“not available”</em>. Когда объект был, но его свойство не измерили или не записали. Что произойдет с <code>NA</code> при различных операциях?</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<pre class="r-output"><code>## [1] NA
</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">*</span> <span class="dv">0</span></span></code></pre></div>
<pre class="r-output"><code>## [1] NA
</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">/</span> <span class="dv">0</span></span></code></pre></div>
<pre class="r-output"><code>## [1] NA
</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] NA
</code></pre>
<p><code>Inf</code> — <em>“infinity”</em> — бесконечность. Вы увидите <code>Inf</code> при делении чисел на ноль.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> <span class="dv">0</span></span></code></pre></div>
<pre class="r-output"><code>## [1] Inf
</code></pre>
<p><code>NaN</code> — <em>“not a number”</em>. <code>NaN</code> получится при делении нуля на ноль, или если взять корень из отрицательного числа.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">/</span> <span class="dv">0</span></span></code></pre></div>
<pre class="r-output"><code>## [1] NaN
</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Warning in sqrt(-1): NaNs produced</code></pre>
<pre class="r-output"><code>## [1] NaN
</code></pre>
<p><code>NULL</code> — ноль, т.е. это значит “пусто,” “ничего нет.”</p>
</div>
</div>
</div>
<div id="основные-структуры-данных-в-r" class="section level1">
<h1>Основные структуры данных в R</h1>
<p>Данные в R можно хранить в виде разных объектов: вектор, матрица, массив, список, датафрейм. Мы бегло рассмотрим только некоторые из них.</p>
<div id="векторы-vectors" class="section level2">
<h2>Векторы (vectors)</h2>
<p>Основной объект R - векторы. Векторы - один объект, внутри которого может быть одно или несколько значений. Главное, чтобы эти значения относились к одному и тому же типу данных.</p>
<p><img src="images/vectors.png"></p>
<p>Вам могло показаться, что в результате выполнения следующих команд получаются просто числа:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dv">23</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 23
</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">25</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 5
</code></pre>
<p>но на самом деле, это векторы единичной длины. В R можно легко создавать векторы большей длины.</p>
<div id="создание-векторов-из-произвольных-элементов" class="section level3">
<h3>Создание векторов из произвольных элементов</h3>
<p>Функция <code>c()</code> — от англ. <em>concatenate</em>. Функция <code>c</code> принимает несколько (произвольное количество) аргументов, разделенных запятыми, и собирает из них вектор (см. справку <code>?c</code>). Когда используете функцию <code>c()</code>, следите, чтобы было английское “си,” а не русское “эс.”</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 2 4 6
</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="sc">-</span><span class="fl">9.3</span>, <span class="dv">0</span>, <span class="fl">2.17</span>, <span class="fl">21.3</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] -9.30  0.00  2.17 21.30
</code></pre>
<p>Векторы можно хранить в переменных для последующего использования.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">16</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>vect_num_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.3</span>, <span class="fl">1.7</span>, <span class="cn">NA</span>, <span class="fl">0.9</span>, <span class="fl">1.6</span>, <span class="fl">1.4</span>)</span></code></pre></div>
<p>При помощи функции <code>c()</code> можно объединять несколько векторов в один вектор.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">9</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 1 1 5 6 7 8 9
</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(vect_num, vect_num_1)</span></code></pre></div>
<pre class="r-output"><code>##  [1]  2.0  4.0  6.0  8.0 10.0 12.0 14.0 16.0  1.3  1.7   NA  0.9  1.6  1.4
</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">100</span>, vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] 100   2   4   6   8  10  12  14  16
</code></pre>
<p>Вектора могут содержать не только числа, но и логические значения, текст.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1]  TRUE  TRUE  TRUE FALSE FALSE  TRUE
</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;violet&quot;</span>)</span></code></pre></div>
<div id="задание-7" class="section level4">
<h4>Задание 7</h4>
<p>Создайте вектор, в котором будут буквами закодированы нуклеотиды ДНК в алфавитном порядке.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-28">
Решение
</button>
<div id="hide_buttonunnamed-chunk-28" class="collapse">
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Решение</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;T&quot;</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] "A" "C" "G" "T"
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-8" class="section level4">
<h4>Задание 8</h4>
<p>Создайте вектор, в котором будет три наименьших отрицательных целых числа в порядке возрастания.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-29">
Решение
</button>
<div id="hide_buttonunnamed-chunk-29" class="collapse">
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Решение</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] -3 -2 -1
</code></pre>
</div>
<p><br /></p>
</div>
</div>
<div id="создание-векторов-из-целых-чисел-подряд" class="section level3">
<h3>Создание векторов из целых чисел подряд</h3>
<p>Оператор <code>:</code> используется для создания целочисленных векторов, где значения следуют одно за другим без пропусков</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="co"># от одного до 10</span></span></code></pre></div>
<pre class="r-output"><code>##  [1]  1  2  3  4  5  6  7  8  9 10
</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">5</span><span class="sc">:</span><span class="dv">3</span> <span class="co"># от -5 до 3</span></span></code></pre></div>
<pre class="r-output"><code>## [1] -5 -4 -3 -2 -1  0  1  2  3
</code></pre>
<div id="задание-9" class="section level4">
<h4>Задание 9</h4>
<p>Создайте вектор из целых чисел от 1 до 100. Как вы думаете, что означают номера в квадратных скобках в начале каждой строки?</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-31">
Решение
</button>
<div id="hide_buttonunnamed-chunk-31" class="collapse">
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> </span></code></pre></div>
<pre class="r-output"><code>##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
##  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36
##  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54
##  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72
##  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90
##  [91]  91  92  93  94  95  96  97  98  99 100
</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Номера в квадратных скобках - порядковый номер первого элемента строки</span></span></code></pre></div>
</div>
<p><br /></p>
</div>
</div>
<div id="создание-векторов-из-повторяющихся-элементов" class="section level3">
<h3>Создание векторов из повторяющихся элементов</h3>
<p>Чтобы создавать длинные векторы из повторяющихся элементов, можно использовать функцию <code>rep()</code></p>
<p><code>?rep</code></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">times =</span> <span class="dv">3</span>) <span class="co"># 1 повторяется 3 раза</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 1 1 1
</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="st">&quot;red&quot;</span>, <span class="at">times =</span> <span class="dv">5</span>) <span class="co"># &quot;red&quot; повторяется 5 раз</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "red" "red" "red" "red" "red"
</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="cn">TRUE</span>, <span class="at">times =</span> <span class="dv">2</span>) <span class="co"># TRUE повторяется 2 раза</span></span></code></pre></div>
<pre class="r-output"><code>## [1] TRUE TRUE
</code></pre>
<p>Названия аргументов функций в R можно не указывать, если вы используете аргументы в том же порядке, что прописан в <code>help</code> к этой функции.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="dv">5</span>) <span class="co"># TRUE повторяется 5 раз, аргументы без названий</span></span></code></pre></div>
<pre class="r-output"><code>## [1] TRUE TRUE TRUE TRUE TRUE
</code></pre>
<p>Создаем логический вектор, где <code>TRUE</code> повторяется 3 раза, <code>FALSE</code> 3 раза и <code>TRUE</code> 4 раза. Результат сохраняем в переменной <code>vect_log</code>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>vect_log <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="dv">4</span>))</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>vect_log</span></code></pre></div>
<pre class="r-output"><code>##  [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
</code></pre>
<div id="задание-10" class="section level4">
<h4>Задание 10</h4>
<p>Создайте вектор <code>season</code> в котором названия времен года будут следовать в том же порядке, что и месяцы года, к которым они относятся (начиная с января).</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-35">
Решение
</button>
<div id="hide_buttonunnamed-chunk-35" class="collapse">
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Без использования rep()</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>season <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;winter&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;winter&quot;</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># С использованием rep()</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>season <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;winter&quot;</span>, <span class="dv">2</span>), </span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>), </span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;winter&quot;</span>)</span></code></pre></div>
</div>
<p><br /></p>
</div>
</div>
<div id="адресация-внутри-векторов" class="section level3">
<h3>Адресация внутри векторов</h3>
<p>При помощи оператора <code>[]</code>, мужно обратится к некоторым элементам вектора.</p>
<p><img src="images/address-vector.png"></p>
<p>В квадратных скобках вам нужно указать порядковые номера элементов вектора, которые вы хотите добыть — один или несколько.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="co"># весь вектор</span></span></code></pre></div>
<pre class="r-output"><code>## [1]  2  4  6  8 10 12 14 16
</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>vect_num[<span class="dv">1</span>] <span class="co"># первый элемент</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 2
</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>vect_num[<span class="dv">3</span>] <span class="co"># 3-й элемент</span></span></code></pre></div>
<pre class="r-output"><code>## [1] 6
</code></pre>
<p>Если вам нужно несколько элементов, то их нужно указать в квадратных скобках их порядковые номера в виде вектора.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>colours <span class="co"># весь вектор</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "red"    "orange" "yellow" "green"  "blue"   "violet"
</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>colours[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="co"># 3-5 элемент</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "yellow" "green"  "blue"
</code></pre>
<p>Аналогично, если вам нужны элементы не подряд, то укажите в квадратных скобках вектор с номерами элементов, который вы создали при помощи функции <code>c()</code>.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>vect_num[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)]</span></code></pre></div>
<pre class="r-output"><code>## [1]  4  8 12
</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>colours[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>)]</span></code></pre></div>
<pre class="r-output"><code>## [1] "red"    "violet"
</code></pre>
<p>Вектор — одномерный объект. У его элементов только один порядковый номер (индекс). Поэтому при обращении к элементам вектора нужно указывать только одно число или один вектор с адресами. R выдаст ошибку, если при обращении к вектору, вы не создавали вектор, а просто перечислили номера элементов через запятую.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>vect_num[<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>]</span></code></pre></div>
<pre><code>Error in vect_num[2, 4, 6] : incorrect number of dimensions</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>colours[<span class="dv">1</span>, <span class="dv">6</span>]</span></code></pre></div>
<pre><code>Error in colours[1, 6] : incorrect number of dimensions</code></pre>
<p>Если попытаться добыть из вектора номер элемента, которого там точно нет, то R выдаст <code>NA</code>, потому, что такого элемента нет</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>vect_num[<span class="dv">198</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] NA
</code></pre>
<p>В R есть встроенные константы, которые помогают быстро генерировать искуственные текстовые векторы (см. <code>?Constants</code>).</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>LETTERS</span></code></pre></div>
<pre class="r-output"><code>##  [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R" "S"
## [20] "T" "U" "V" "W" "X" "Y" "Z"
</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>letters</span></code></pre></div>
<pre class="r-output"><code>##  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
## [20] "t" "u" "v" "w" "x" "y" "z"
</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>month.abb</span></code></pre></div>
<pre class="r-output"><code>##  [1] "Jan" "Feb" "Mar" "Apr" "May" "Jun" "Jul" "Aug" "Sep" "Oct" "Nov" "Dec"
</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>month.name</span></code></pre></div>
<pre class="r-output"><code>##  [1] "January"   "February"  "March"     "April"     "May"       "June"     
##  [7] "July"      "August"    "September" "October"   "November"  "December"
</code></pre>
<div id="задание-11" class="section level4">
<h4>Задание 11</h4>
<p>Извлеките из вектора <code>month.name</code></p>
<ul>
<li>летние месяцы,</li>
<li>зимние месяцы.</li>
</ul>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-43">
Решение
</button>
<div id="hide_buttonunnamed-chunk-43" class="collapse">
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># летние месяцы</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>month.name[<span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>] </span></code></pre></div>
<pre class="r-output"><code>## [1] "June"   "July"   "August"
</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># зимние месяцы</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>month.name[<span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">1</span>, <span class="dv">2</span>)] </span></code></pre></div>
<pre class="r-output"><code>## [1] "December" "January"  "February"
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-12" class="section level4">
<h4>Задание 12</h4>
<p>Извлеките из вектора LETTERS буквы в таком порядке, чтобы получилось слово <code>SUN</code>.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-44">
Решение
</button>
<div id="hide_buttonunnamed-chunk-44" class="collapse">
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>LETTERS[<span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">21</span>, <span class="dv">14</span>)]</span></code></pre></div>
<pre class="r-output"><code>## [1] "S" "U" "N"
</code></pre>
</div>
<p><br /></p>
</div>
</div>
<div id="операции-с-векторами" class="section level3">
<h3>Операции с векторами</h3>
<p>Поэкспериментируем с векторами. Проверим, как работают арифметические операции</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<pre class="r-output"><code>## [1]  4  6  8 10 12 14 16 18
</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre class="r-output"><code>## [1]  4  8 12 16 20 24 28 32
</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="sc">*</span> (<span class="sc">-</span><span class="dv">2</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1]  -4  -8 -12 -16 -20 -24 -28 -32
</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>vect_num<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre class="r-output"><code>## [1]   4  16  36  64 100 144 196 256
</code></pre>
<p>Арифметические операции выполняются с каждым элементом вектора — это <strong>векторизованные операции</strong>.</p>
<p>С самими векторами тоже можно делать некоторые операции.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] 72
</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] 8
</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] 9
</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] 2
</code></pre>
<div id="задание-13" class="section level4">
<h4>Задание 13</h4>
<p>Создайте переменную <code>powers_of_two</code>, в которой сохраните последовательность из целочисленных степеней двойки — с первой по пятую. Используйте векторизацию. Выведите содержимое <code>powers_of_two</code> в консоль.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-47">
Решение
</button>
<div id="hide_buttonunnamed-chunk-47" class="collapse">
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>powers_of_two <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">^</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>powers_of_two</span></code></pre></div>
<pre class="r-output"><code>## [1]  2  4  8 16 32
</code></pre>
</div>
<p><br /></p>
</div>
</div>
</div>
<div id="матрицы-matrices" class="section level2">
<h2>Матрицы (matrices)</h2>
<p>Матрицы — это двумерные объекты, похожие на таблицы, в которых хранятся данные только одного определенного типа.</p>
<p><img src="images/matrix.png"></p>
<p>Матрицы создают при помощи функции <code>matrix()</code>, которой нужно передать вектор с данными и размер будущей матрицы (число строк или столбцов).</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Матрица с числовыми данными</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12
</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Матрица с текстовыми данными</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="at">data =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>], <span class="at">ncol =</span> <span class="dv">6</span>)</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,] "A"  "C"  "E"  "G"  "I"  "K" 
## [2,] "B"  "D"  "F"  "H"  "J"  "L"
</code></pre>
<p>Обычно элементы записываются в матрицу столбцами</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6
</code></pre>
<p>Порядок заполнения матрицы элементами можно изменить, если указать <code>byrow = TRUE</code>.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6
</code></pre>
<div id="адресация-в-матрицах" class="section level3">
<h3>Адресация в матрицах</h3>
<p>Поскольку матрицы — это двумерные объекты, позиции элементов в них можно описать при помощи двух индексов, в отличие от векторов. Первым в квадратных скобках следует номер строки, вторым — номер столбца</p>
<p><img src="images/address-matrix.png"></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>], <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>mat</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2] [,3]
## [1,] "A"  "E"  "I" 
## [2,] "B"  "F"  "J" 
## [3,] "C"  "G"  "K" 
## [4,] "D"  "H"  "L"
</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>mat[<span class="dv">3</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "G"
</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>mat[<span class="dv">1</span>, ]</span></code></pre></div>
<pre class="r-output"><code>## [1] "A" "E" "I"
</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>mat[, <span class="dv">3</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "I" "J" "K" "L"
</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>mat[, <span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2]
## [1,] "E"  "I" 
## [2,] "F"  "J" 
## [3,] "G"  "K" 
## [4,] "H"  "L"
</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>mat[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2]
## [1,] "A"  "I" 
## [2,] "B"  "J" 
## [3,] "C"  "K"
</code></pre>
<div id="задание-14" class="section level4">
<h4>Задание 14</h4>
<p>Создайте матрицу <code>calendar</code> с названиями месяцев, так, чтобы в первой строке был первый квартал.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-52">
Решение
</button>
<div id="hide_buttonunnamed-chunk-52" class="collapse">
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>calendar <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> month.name, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>calendar</span></code></pre></div>
<pre class="r-output"><code>##      [,1]      [,2]       [,3]       
## [1,] "January" "February" "March"    
## [2,] "April"   "May"      "June"     
## [3,] "July"    "August"   "September"
## [4,] "October" "November" "December"
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-15" class="section level4">
<h4>Задание 15</h4>
<p>Выберите из матрицы <code>calendar</code> месяцы третьего квартала.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-53">
Решение
</button>
<div id="hide_buttonunnamed-chunk-53" class="collapse">
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>calendar[<span class="dv">3</span>, ]</span></code></pre></div>
<pre class="r-output"><code>## [1] "July"      "August"    "September"
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-16" class="section level4">
<h4>Задание 16</h4>
<p>Выберите из матрицы <code>calendar</code> июнь.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-54">
Решение
</button>
<div id="hide_buttonunnamed-chunk-54" class="collapse">
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>calendar[<span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "June"
</code></pre>
</div>
<p><br /></p>
</div>
</div>
</div>
<div id="массивы-arrays" class="section level2">
<h2>Массивы (arrays)</h2>
<p>Массивы — это многомерные объекты, в которых можно хранить данные одного и того же типа. По структуре они очень похожи на матрицы</p>
<p><img src="images/array.png"></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>ar <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>))</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>ar</span></code></pre></div>
<pre class="r-output"><code>## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    1    3    5    7
## [2,]    2    4    6    8
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]    9   11   13   15
## [2,]   10   12   14   16
## 
## , , 3
## 
##      [,1] [,2] [,3] [,4]
## [1,]   17   19   21   23
## [2,]   18   20   22   24
</code></pre>
<div id="адресация-в-массивах" class="section level3">
<h3>Адресация в массивах</h3>
<p>Адреса в массивах указываются в том же порядке: сначала идет строка, за ней столбец, затем следуют прочие измерения.</p>
<p><img src="images/address-array.png"></p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] 19
</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>ar[, , <span class="dv">1</span>]</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    3    5    7
## [2,]    2    4    6    8
</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>ar[, <span class="dv">1</span>, ]</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2] [,3]
## [1,]    1    9   17
## [2,]    2   10   18
</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">1</span>, , ]</span></code></pre></div>
<pre class="r-output"><code>##      [,1] [,2] [,3]
## [1,]    1    9   17
## [2,]    3   11   19
## [3,]    5   13   21
## [4,]    7   15   23
</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>ar[<span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] 1 3 5
</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>ar[, , <span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre class="r-output"><code>## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    9   11   13   15
## [2,]   10   12   14   16
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]   17   19   21   23
## [2,]   18   20   22   24
</code></pre>
</div>
</div>
<div id="датафреймы-data-frames" class="section level2">
<h2>Датафреймы (data frames)</h2>
<p>Датафреймы — это такие двумерные таблицы, в которых столбцы могут содержать данные разных типов.</p>
<p><img src="images/data.frame.png"></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2014</span><span class="sc">:</span><span class="dv">2017</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">year =</span> x, <span class="at">type =</span> y, <span class="at">test_passed =</span> z, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>dat</span></code></pre></div>
<pre class="r-output"><code>##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
</code></pre>
<div id="адресация-в-датафреймах" class="section level3">
<h3>Адресация в датафреймах</h3>
<p>Чтобы вытащить фрагмент датафрейма, можно использовать несколько вариантов действий.</p>
<p>Во-первых, оператор <code>[]</code> работает с датафреймами точно так же как и с матрицами. Поскольку датафреймы — это двумерные объекты, позиции элементов в них можно описать при помощи двух индексов. Первым в квадратных скобках <code>[]</code>, как обычно, следует номер строки, вторым — номер столбца.</p>
<p><img src="images/address-data.frame.png"></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>dat[<span class="dv">2</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "B"
</code></pre>
<p>На месте индекса столбцов в <code>[]</code> квадратных скобках можно указать вектор имен переменных вместо их номеров.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>dat[, <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;test_passed&quot;</span>)]</span></code></pre></div>
<pre class="r-output"><code>##   year test_passed
## 1 2014        TRUE
## 2 2015        TRUE
## 3 2016       FALSE
## 4 2017        TRUE
</code></pre>
<p>Во-вторых, оператор <code>$</code> позволяет выбрать одну из переменных по имени</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>year</span></code></pre></div>
<pre class="r-output"><code>## [1] 2014 2015 2016 2017
</code></pre>
<p>Можно использовать комбинацию предыдущих техник.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>test_passed[<span class="dv">3</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE
</code></pre>
<div id="задание-17" class="section level4">
<h4>Задание 17</h4>
<p>Создайте датафрейм <code>year</code>, в котором будет две переменные: <code>month</code> и <code>season</code>.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-62">
Решение
</button>
<div id="hide_buttonunnamed-chunk-62" class="collapse">
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Названия месяцев возьмем из month.name</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co"># А вектор season создадим сами</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>ss <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;winter&quot;</span>, <span class="dv">2</span>), </span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>), <span class="at">each =</span> <span class="dv">3</span>), </span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;winter&quot;</span>)</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="co"># собираем в датафрейм</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">month =</span> month.name, <span class="at">season =</span> ss)</span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>year</span></code></pre></div>
<pre class="r-output"><code>##        month season
## 1    January winter
## 2   February winter
## 3      March spring
## 4      April spring
## 5        May spring
## 6       June summer
## 7       July summer
## 8     August summer
## 9  September autumn
## 10   October autumn
## 11  November autumn
## 12  December winter
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-18" class="section level4">
<h4>Задание 18</h4>
<p>Выберите из датафрейма <code>year</code></p>
<ul>
<li>строки, соответствующие весенним месяцам</li>
<li>время года, которому соответствует июнь</li>
<li>всю колонку, кодирующую сезон</li>
</ul>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-63">
Решение
</button>
<div id="hide_buttonunnamed-chunk-63" class="collapse">
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - строки, соответствующие весенним месяцам</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>year[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, ]</span></code></pre></div>
<pre class="r-output"><code>##   month season
## 3 March spring
## 4 April spring
## 5   May spring
</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - всю колонку, кодирующую сезон</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>year<span class="sc">$</span>season</span></code></pre></div>
<pre class="r-output"><code>##  [1] "winter" "winter" "spring" "spring" "spring" "summer" "summer" "summer"
##  [9] "autumn" "autumn" "autumn" "winter"
</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>year[, <span class="st">&quot;season&quot;</span>]</span></code></pre></div>
<pre class="r-output"><code>##  [1] "winter" "winter" "spring" "spring" "spring" "summer" "summer" "summer"
##  [9] "autumn" "autumn" "autumn" "winter"
</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>year[, <span class="dv">2</span>]</span></code></pre></div>
<pre class="r-output"><code>##  [1] "winter" "winter" "spring" "spring" "spring" "summer" "summer" "summer"
##  [9] "autumn" "autumn" "autumn" "winter"
</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - время года, которому соответствует июнь</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>year[<span class="dv">6</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "summer"
</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>year[<span class="dv">6</span>, <span class="st">&quot;season&quot;</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "summer"
</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>year<span class="sc">$</span>season[<span class="dv">6</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "summer"
</code></pre>
</div>
<p><br /></p>
</div>
</div>
</div>
<div id="списки-lists" class="section level2">
<h2>Списки (lists)</h2>
<p>Списки позволяют хранить данные различных типов, и при этом разной длины.</p>
<p><img src="images/lists.png"></p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(dat, mat, vect_num, colours)</span></code></pre></div>
<pre class="r-output"><code>## [[1]]
##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
## 
## [[2]]
##      [,1] [,2] [,3]
## [1,] "A"  "E"  "I" 
## [2,] "B"  "F"  "J" 
## [3,] "C"  "G"  "K" 
## [4,] "D"  "H"  "L" 
## 
## [[3]]
## [1]  2  4  6  8 10 12 14 16
## 
## [[4]]
## [1] "red"    "orange" "yellow" "green"  "blue"   "violet"
</code></pre>
<p>Можно создавать именованные списки</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Dfr =</span> dat, <span class="at">Matr =</span> mat, <span class="at">Vect1 =</span> vect_num, <span class="at">Vect2 =</span> colours)</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>lst</span></code></pre></div>
<pre class="r-output"><code>## $Dfr
##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
## 
## $Matr
##      [,1] [,2] [,3]
## [1,] "A"  "E"  "I" 
## [2,] "B"  "F"  "J" 
## [3,] "C"  "G"  "K" 
## [4,] "D"  "H"  "L" 
## 
## $Vect1
## [1]  2  4  6  8 10 12 14 16
## 
## $Vect2
## [1] "red"    "orange" "yellow" "green"  "blue"   "violet"
</code></pre>
<p>Кстати, датафрейм можно определить как список векторов одинаковой длины.</p>
<div id="адресация-в-списках" class="section level3">
<h3>Адресация в списках</h3>
<p>Для выбора данных из списков существует несколько вариантов действий.</p>
<ol style="list-style-type: decimal">
<li>Хорошо нам знакомый оператор <code>[]</code> работает и со списками. Он позволяет извлечь элементы списков в виде списков.</li>
</ol>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>lst[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># список из двух элементов</span></span></code></pre></div>
<pre class="r-output"><code>## $Dfr
##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
## 
## $Matr
##      [,1] [,2] [,3]
## [1,] "A"  "E"  "I" 
## [2,] "B"  "F"  "J" 
## [3,] "C"  "G"  "K" 
## [4,] "D"  "H"  "L"
</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>lst[<span class="dv">1</span>] <span class="co"># список из одного элемента</span></span></code></pre></div>
<pre class="r-output"><code>## $Dfr
##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Чтобы извлечь содержимое элемента списка, нужно использовать двойные квадратные скобки <code>[[]]</code>. С элементом списка дальше можно производить любые действия в обычном порядке.</li>
</ol>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>lst[[<span class="dv">1</span>]]</span></code></pre></div>
<pre class="r-output"><code>##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>lst[[<span class="dv">1</span>]]<span class="sc">$</span>v2</span></code></pre></div>
<pre class="r-output"><code>## NULL
</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>При помощи оператора <code>$</code> можно извлечь элементы из именованного списка по их именам. Дальше с этими элементами можно проводить любые манипуляции.</li>
</ol>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>lst<span class="sc">$</span>Vect1</span></code></pre></div>
<pre class="r-output"><code>## [1]  2  4  6  8 10 12 14 16
</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>lst<span class="sc">$</span>Matr[, <span class="dv">1</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "A" "B" "C" "D"
</code></pre>
</div>
</div>
</div>
<div id="факторы-factors-особый-тип-данных" class="section level1">
<h1>Факторы (factors) — особый тип данных</h1>
<p>Факторы - это способ хранения дискретных (= категориальных данных). Например, если вы поймали 10 улиток и посмотрели их цвет. У большого количества улиток небольшое счетное количество возможных цветов.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>snail_colours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;yellow&quot;</span>)</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>snail_colours <span class="co"># это текстовый вектор.</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "red"    "green"  "green"  "green"  "yellow" "yellow" "yellow" "yellow"
</code></pre>
<p>Но цвет “желтый” обозначает одно и то же для каждой из улиток. Поэтому в целях экономии места можно записать цвета этих улиток в виде вектора, в котором численным значениям будут сопоставлены “этикетки” (называются “уровни” - levels) - названия цветов. Мы можем создать “фактор” цвет улиток.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>f_snail_alphabet <span class="ot">&lt;-</span> <span class="fu">factor</span>(snail_colours)</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>f_snail_alphabet</span></code></pre></div>
<pre class="r-output"><code>## [1] red    green  green  green  yellow yellow yellow yellow
## Levels: green red yellow
</code></pre>
<p>Уровни этого фактора: <code>1 - green</code>, <code>2 - red</code>, <code>3 - yellow</code>. По умолчанию, R назначает порядок уровней по алфавиту. Можно изменить порядок (см. <code>help("factor")</code>). Нам это пригодится позже.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>f_snail_ryg <span class="ot">&lt;-</span> <span class="fu">factor</span>(snail_colours, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;green&quot;</span>))</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>f_snail_ryg</span></code></pre></div>
<pre class="r-output"><code>## [1] red    green  green  green  yellow yellow yellow yellow
## Levels: red yellow green
</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>f_snail_yrg <span class="ot">&lt;-</span> <span class="fu">relevel</span>(f_snail_ryg, <span class="at">ref =</span> <span class="st">&quot;yellow&quot;</span>)</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>f_snail_yrg</span></code></pre></div>
<pre class="r-output"><code>## [1] red    green  green  green  yellow yellow yellow yellow
## Levels: yellow red green
</code></pre>
<div id="задание-19" class="section level4">
<h4>Задание 19</h4>
<p>Из вектора <code>season</code>, созданного ранее, создайте фактор <code>season_f</code> с алфавитным порядком уровней.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-72">
Решение
</button>
<div id="hide_buttonunnamed-chunk-72" class="collapse">
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>season</span></code></pre></div>
<pre class="r-output"><code>##  [1] "winter" "winter" "spring" "spring" "spring" "summer" "summer" "summer"
##  [9] "autumn" "autumn" "autumn" "winter"
</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Если создать фактор, не указав уровни, то порядок будет алфавитный</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>season_f <span class="ot">&lt;-</span> <span class="fu">factor</span>(season)</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>season_f</span></code></pre></div>
<pre class="r-output"><code>##  [1] winter winter spring spring spring summer summer summer autumn autumn
## [11] autumn winter
## Levels: autumn spring summer winter
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-20" class="section level4">
<h4>Задание 20</h4>
<p>Из вектора <code>season</code>, созданного ранее, создайте фактор <code>season_f</code> , в котором уровни следуют в том же порядке, что и времена года в году.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-73">
Решение
</button>
<div id="hide_buttonunnamed-chunk-73" class="collapse">
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Чтобы уровни следовали в нужном порядке, это нужно специально указать</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>season_f <span class="ot">&lt;-</span> <span class="fu">factor</span>(season, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>))</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>season_f</span></code></pre></div>
<pre class="r-output"><code>##  [1] winter winter spring spring spring summer summer summer autumn autumn
## [11] autumn winter
## Levels: winter spring summer autumn
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-21" class="section level4">
<h4>Задание 21</h4>
<p>Из вектора <code>season</code>, созданного ранее, создайте фактор <code>season_f</code>, в котором уровни следуют в том же порядке, что и времена года в году, и называются первыми двумя буквами.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-74">
Решение
</button>
<div id="hide_buttonunnamed-chunk-74" class="collapse">
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Можно переименовать уровни</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>season_f <span class="ot">&lt;-</span> <span class="fu">factor</span>(season, </span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>),</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;wi&quot;</span>, <span class="st">&quot;sp&quot;</span>, <span class="st">&quot;su&quot;</span>, <span class="st">&quot;au&quot;</span>))</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>season_f</span></code></pre></div>
<pre class="r-output"><code>##  [1] wi wi sp sp sp su su su au au au wi
## Levels: wi sp su au
</code></pre>
</div>
<p><br /></p>
</div>
</div>
<div id="работа-с-логическими-данными" class="section level1">
<h1>Работа с логическими данными</h1>
<div id="операторы-сравнения" class="section level2">
<h2>Операторы сравнения</h2>
<p>Операторы сравнения используются для проверки условий.</p>
<ul>
<li><code>==</code> — равно</li>
<li><code>&gt;</code> — больше</li>
<li><code>&lt;</code> — меньше</li>
<li><code>!=</code> — не равно</li>
<li><code>&gt;=</code> — больше или равно</li>
<li><code>&lt;=</code> — меньше или равно</li>
</ul>
<p>Кроме операторов сравнения есть функции, названия которых начинаются на <code>is</code> (например, <code>is.numeric()</code>, <code>is.na()</code>), оператор сопоставления <code>%in%</code> и т.п.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>?Comparison <span class="co"># справка об операторах сравнения</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>?match      <span class="co"># о сопоставлении</span></span></code></pre></div>
<p>Пример:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="co"># ранее созданный вектор</span></span></code></pre></div>
<pre class="r-output"><code>## [1]  2  4  6  8 10 12 14 16
</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="sc">&gt;</span> <span class="dv">8</span></span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="sc">!=</span> <span class="dv">2</span></span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
</code></pre>
</div>
<div id="логические-операторы" class="section level2">
<h2>Логические операторы</h2>
<p>Логические операторы используются для того, чтобы проверить сразу несколько условий</p>
<p><code>&amp;</code> — логическое “И”:</p>
<ul>
<li><code>TRUE &amp; TRUE</code> — <code>TRUE</code></li>
<li><code>TRUE &amp; FALSE</code> — <code>FALSE</code></li>
<li><code>FALSE &amp; FALSE</code> — <code>FALSE</code></li>
</ul>
<p><code>|</code> — логическое “ИЛИ”:</p>
<ul>
<li><code>TRUE | TRUE</code> — <code>TRUE</code></li>
<li><code>TRUE | FALSE</code> — <code>TRUE</code></li>
<li><code>FALSE | FALSE</code> — <code>FALSE</code></li>
</ul>
<p><code>!</code> — логическое отрицание:</p>
<ul>
<li><code>!TRUE</code> — <code>FALSE</code></li>
<li><code>!FALSE</code> — <code>TRUE</code></li>
</ul>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>?Logic <span class="co"># Справка о логических операторах</span></span></code></pre></div>
<p>Пример:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>vect_num <span class="co"># ранее созданный вектор</span></span></code></pre></div>
<pre class="r-output"><code>## [1]  2  4  6  8 10 12 14 16
</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>(vect_num <span class="sc">!=</span> <span class="dv">2</span>) <span class="sc">&amp;</span> (vect_num <span class="sc">&lt;</span> <span class="dv">8</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE
</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>season <span class="co"># ранее созданный вектор</span></span></code></pre></div>
<pre class="r-output"><code>##  [1] "winter" "winter" "spring" "spring" "spring" "summer" "summer" "summer"
##  [9] "autumn" "autumn" "autumn" "winter"
</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>season <span class="sc">==</span> <span class="st">&quot;spring&quot;</span></span></code></pre></div>
<pre class="r-output"><code>##  [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
</code></pre>
<div id="задание-22" class="section level4">
<h4>Задание 22</h4>
<p>При помощи вектора <code>season</code>, создайте логический вектор, где <code>TRUE</code> стоит везде, кроме зимних месяцев.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-79">
Решение
</button>
<div id="hide_buttonunnamed-chunk-79" class="collapse">
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>season <span class="sc">!=</span> <span class="st">&quot;winter&quot;</span></span></code></pre></div>
<pre class="r-output"><code>##  [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE
</code></pre>
</div>
<p><br /></p>
</div>
</div>
<div id="отбор-данных-с-помощью-логических-векторов" class="section level2">
<h2>Отбор данных с помощью логических векторов</h2>
<p>Логический вектор можно использовать внутри оператора <code>[]</code> для извлечения данных. Например, давайте извлечем месяц, который называется “June.”</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>month.name[month.name <span class="sc">==</span> <span class="st">&quot;June&quot;</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "June"
</code></pre>
<p>Если есть несколько сопряженных векторов, то проверку условия по одному из них вполне можно использовать для отбора значений в другом. Например, можно извлечь только весенние месяцы при помощи проверки условия. Это проще, чем вручную.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>month.name[season <span class="sc">==</span> <span class="st">&quot;spring&quot;</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "March" "April" "May"
</code></pre>
<p>Аналогичным образом, можно использовать логические векторы для фильтрации датафреймов. Отберем строки с зимними месяцами из датафрейма <code>year</code>.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>year[year<span class="sc">$</span>season <span class="sc">==</span> <span class="st">&quot;winter&quot;</span>, ]</span></code></pre></div>
<pre class="r-output"><code>##       month season
## 1   January winter
## 2  February winter
## 12 December winter
</code></pre>
<p>Можем отобрать не строки целиком, а только значение переменной <code>month</code>.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>year<span class="sc">$</span>month[year<span class="sc">$</span>season <span class="sc">==</span> <span class="st">&quot;winter&quot;</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "January"  "February" "December"
</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>year[year<span class="sc">$</span>season <span class="sc">==</span> <span class="st">&quot;winter&quot;</span>, <span class="st">&quot;month&quot;</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "January"  "February" "December"
</code></pre>
<p>Следующие несколько заданий используют данные о продолжительности сна млекопитающих (датасет <code>msleep</code> из пакета <code>ggplot2</code>). Данные можно загрузить так:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># активируем пакет ggplot2</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;msleep&quot;</span>)   <span class="co"># активируем встроенный датасет msleep</span></span></code></pre></div>
<div id="задание-23" class="section level4">
<h4>Задание 23</h4>
<p>Добудьте из <code>msleep</code> английские названия видов, у которых общая продолжительность сна больше 15 часов.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-85">
Решение
</button>
<div id="hide_buttonunnamed-chunk-85" class="collapse">
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>msleep<span class="sc">$</span>name[msleep<span class="sc">$</span>sleep_total <span class="sc">&gt;</span> <span class="dv">17</span>]</span></code></pre></div>
<pre class="r-output"><code>## [1] "Long-nosed armadillo"   "North American Opossum" "Big brown bat"         
## [4] "Thick-tailed opposum"   "Little brown bat"       "Giant armadillo"
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-24" class="section level4">
<h4>Задание 24</h4>
<p>По данным <code>msleep</code> посчитайте, какова средняя продолжительность сна хищников.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-86">
Решение
</button>
<div id="hide_buttonunnamed-chunk-86" class="collapse">
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(msleep<span class="sc">$</span>sleep_total[msleep<span class="sc">$</span>vore <span class="sc">==</span> <span class="st">&quot;carni&quot;</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 10.37895
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-25" class="section level4">
<h4>Задание 25</h4>
<p>По данным <code>msleep</code> посчитайте, какова минимальная продолжительность сна травоядных.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-87">
Решение
</button>
<div id="hide_buttonunnamed-chunk-87" class="collapse">
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(msleep<span class="sc">$</span>sleep_total[msleep<span class="sc">$</span>vore <span class="sc">==</span> <span class="st">&quot;herbi&quot;</span>], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 1.9
</code></pre>
</div>
<p><br /></p>
</div>
<div id="задание-26" class="section level4">
<h4>Задание 26</h4>
<p>По данным <code>msleep</code> найдите, у какого животного минимальная продолжительность сна.</p>
<button class="btn btn-primary btn-sm" data-toggle="collapse" data-target="#hide_buttonunnamed-chunk-88">
Решение
</button>
<div id="hide_buttonunnamed-chunk-88" class="collapse">
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>msleep<span class="sc">$</span>name[msleep<span class="sc">$</span>sleep_total <span class="sc">==</span> <span class="fu">min</span>(msleep<span class="sc">$</span>sleep_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)]</span></code></pre></div>
<pre class="r-output"><code>## [1] "Giraffe"
</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>msleep<span class="sc">$</span>name[<span class="fu">which.min</span>(msleep<span class="sc">$</span>sleep_total)]</span></code></pre></div>
<pre class="r-output"><code>## [1] "Giraffe"
</code></pre>
</div>
<p><br /></p>
</div>
</div>
</div>
<div id="как-узнать-к-какому-классу-структур-данных-относится-содержимое-переменной" class="section level1">
<h1>Как узнать, к какому классу структур данных относится содержимое переменной?</h1>
<p>Для того, чтобы узнать к какой структуре данных относится переменная, можно воспользоваться функцией <code>class()</code></p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(f_snail_alphabet)</span></code></pre></div>
<pre class="r-output"><code>## [1] "factor"
</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(vect_log)</span></code></pre></div>
<pre class="r-output"><code>## [1] "logical"
</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] "numeric"
</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(colours)</span></code></pre></div>
<pre class="r-output"><code>## [1] "character"
</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(mat)</span></code></pre></div>
<pre class="r-output"><code>## [1] "matrix" "array"
</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ar)</span></code></pre></div>
<pre class="r-output"><code>## [1] "array"
</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dat)</span></code></pre></div>
<pre class="r-output"><code>## [1] "data.frame"
</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lst)</span></code></pre></div>
<pre class="r-output"><code>## [1] "list"
</code></pre>
</div>
<div id="приведение-coercion-проверка-принадлежности-к-классутипу." class="section level1">
<h1>Приведение (coercion), проверка принадлежности к классу/типу.</h1>
<p>Приведение (coercion) — это преобразование объекта из одного типа данных в другой. Функции для конверсии называются по единому паттерну: <code>as.имя_типа()</code>. Функции для проверки называются <code>is.имя_типа()</code>. Аналогичные функции есть для принадлежности разным классам структур данных (<code>as.имя_класса()</code>, <code>is.имя_класса()</code>).</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>vect_num</span></code></pre></div>
<pre class="r-output"><code>## [1]  2  4  6  8 10 12 14 16
</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] "2"  "4"  "6"  "8"  "10" "12" "14" "16"
</code></pre>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>vect_log</span></code></pre></div>
<pre class="r-output"><code>##  [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(vect_log)</span></code></pre></div>
<pre class="r-output"><code>##  [1] 1 1 1 0 0 0 1 1 1 1
</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(vect_log)</span></code></pre></div>
<pre class="r-output"><code>##  [1] "TRUE"  "TRUE"  "TRUE"  "FALSE" "FALSE" "FALSE" "TRUE"  "TRUE"  "TRUE" 
## [10] "TRUE"
</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="fu">as.numeric</span>(vect_log))</span></code></pre></div>
<pre class="r-output"><code>##  [1] "1" "1" "1" "0" "0" "0" "1" "1" "1" "1"
</code></pre>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">as.character</span>(vect_log))</span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre class="r-output"><code>##  [1] NA NA NA NA NA NA NA NA NA NA
</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE
</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] TRUE
</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.logical</span>(vect_log)</span></code></pre></div>
<pre class="r-output"><code>## [1] TRUE
</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.vector</span>(vect_log)</span></code></pre></div>
<pre class="r-output"><code>## [1] TRUE
</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(vect_log)</span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE
</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.matrix</span>(vect_log)</span></code></pre></div>
<pre class="r-output"><code>##        [,1]
##  [1,]  TRUE
##  [2,]  TRUE
##  [3,]  TRUE
##  [4,] FALSE
##  [5,] FALSE
##  [6,] FALSE
##  [7,]  TRUE
##  [8,]  TRUE
##  [9,]  TRUE
## [10,]  TRUE
</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(mat)</span></code></pre></div>
<pre class="r-output"><code>## [1] TRUE
</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.array</span>(dat)</span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE
</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(mat)</span></code></pre></div>
<pre class="r-output"><code>##   V1 V2 V3
## 1  A  E  I
## 2  B  F  J
## 3  C  G  K
## 4  D  H  L
</code></pre>
</div>
<div id="функции-functions" class="section level1">
<h1>Функции (functions)</h1>
<p>Вы уже видели массу функций, их легко узнать по скобкам после ключевого слова.</p>
<p>Познакомимся еще с несколькими и научимся писать пользовательские функции. Пользовательские функции позволяют автоматизировать повторяющиеся действия и делают код легко читаемым.</p>
<p>Вспомним, как выглядят наши векторы</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>vect_num</span></code></pre></div>
<pre class="r-output"><code>## [1]  2  4  6  8 10 12 14 16
</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>vect_num_1</span></code></pre></div>
<pre class="r-output"><code>## [1] 1.3 1.7  NA 0.9 1.6 1.4
</code></pre>
<p>Помните, мы говорили, что длину вектора можно вычислить при помощи функции <code>length()</code>, а сумму элементов вектора при помощи функции <code>sum()</code>, среднее — при помощи <code>mean()</code>.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vect_num)</span></code></pre></div>
<pre class="r-output"><code>## [1] 9
</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vect_num_1)</span></code></pre></div>
<pre class="r-output"><code>## [1] NA
</code></pre>
<p>Вектор <code>vect_num_1</code> содержит <code>NA</code>. Чтобы не учитывать <code>NA</code> при подсчете, нужно использовать аргумент <code>na.rm = TRUE</code>.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vect_num_1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 1.38
</code></pre>
<p>Попробуем написать пользовательскую функцию <code>my_mean()</code>, которая будет по умолчанию считать среднее значение элементов в векторе с учетом пропущенных значений (<code>NA</code>)</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>my_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
<p>В этом коде:</p>
<ul>
<li><code>my_mean</code> — переменная, название функции. В эту переменную мы складываем функцию, которую создает функция <code>function()</code></li>
<li><code>function()</code> — функция, которая делает функции. В скобках перечисляются аргументы (названия переменных, которые мы передаем в функцию, чтобы она что-то сделала с ними) <code>{ }</code> — в фигурных скобках тело функции — последовательность действий, которую нужно сделать с аргументами</li>
</ul>
<p>Иногда у функций бывает еще инструкция <code>return()</code>, которая сообщает, что именно должна возвращать наша функция. Вот как выглядела бы наша функция с этой инструкцией</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>my_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Любую пользовательскую функцию нужно протестировать. Несмотря на то, что наша функция <code>my_mean()</code> очень простая и проверка будет выглядеть несколько натянуто, давайте проверим ее при помощи встроенной функции.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vect_num_1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre class="r-output"><code>## [1] 1.38
</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_mean</span>(vect_num_1)</span></code></pre></div>
<pre class="r-output"><code>## [1] 1.38
</code></pre>
<p>Наша функция работает правильно.</p>
</div>
<div id="чтение-данных-из-файлов" class="section level1">
<h1>Чтение данных из файлов</h1>
<div id="рабочая-директория" class="section level2">
<h2>Рабочая директория</h2>
<p>Напомним, как можно организовать хранение файлов:</p>
<ul>
<li><code>C:\Proteomics\</code> — файлы со скриптами .R и другие материалы курса.</li>
<li><code>C:\Proteomics\data\</code> — файлы с данными.</li>
</ul>
<p>Скачайте файлы с данными к этому занятию и поместите их в папке <code>data</code> внутри вашей рабочей директории.</p>
<ul>
<li>Данные <span class="citation">(Kikuta et al. 2009)</span>:
<ul>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.csv">expression_3.csv</a></li>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.xlsx">expression_3.xlsx</a></li>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.zip">expression_3.zip</a></li>
</ul></li>
</ul>
<p>Чтобы при открытии не пришлось полностью прописывать пути к файлам, удобно попросить <code>R</code> считать <code>C:\Proteomics\</code> <strong>рабочей директорией</strong>. Тогда можно будет указывать <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%83%D1%82%D1%8C_%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D1%83">относительный путь к файлам</a>.</p>
<p>Например, пусть вам нужно открыть файл <code>expression_3.csv</code>, лежащий в <code>C:\Proteomics\data\</code>. Если ваша рабочая директория <code>C:\Proteomics\</code>, достаточно написать <code>"data/expression_3.csv"</code>. Если рабочей будет какая-то другая директория, то придется писать полный путь к файлу.</p>
<p>Я рекомендую использовать относительные пути, т.к. это позволяет легче переносить файлы с одной машины на другую с сохранением структуры проекта.</p>
</div>
<div id="способы-установки-пути-к-рабочей-директории-working-directory" class="section level2">
<h2>Способы установки пути к рабочей директории (working directory)</h2>
<ol style="list-style-type: decimal">
<li>Выберите в меню <code>Session</code> -&gt; <code>Set working Directory...</code> -&gt; <code>To Source File Location</code> (Если вы уже сохранили код).</li>
<li>На вкладке <code>Files</code> в одной из рабочих областей <code>RStudio</code> выберите многоточие <code>...</code> -&gt; в открывшемся системном диалоге выбора файлов найдите директорию, в которой лежит ваш код и нажмите OK</li>
<li>Можно вручную прописать путь к рабочей директории в кавычках в качестве аргумента функции <code>setwd()</code> (например, <code>setwd("/media/data/proteomics")</code>).</li>
</ol>
</div>
<div id="чтение-из-текстовых-файлов" class="section level2">
<h2>Чтение из текстовых файлов</h2>
<p>Один из часто используемых форматов файлов для хранения табличных данных — текстовые файлы с разделителями (<code>.csv</code>, <code>.delim</code>, <code>.txt</code>).</p>
<p>Если открыть в текстовом редакторе файл <code>expression_3.csv</code>, можно заметить, что в нем есть названия переменных в первой строке, отдельные столбцы отделены друг от друга запятыми, а десятичные разряды в числах — точками.</p>
<p>Для чтения данных из текстовых файлов с разделителями существует масса функций, но все они — это модификации одной главной функции <code>read.table()</code>. У этой функции очень много аргументов, которые позволяют настроить ее для открытия самых разных типов текстовых файлов. О назначении аргументов можно узнать в файле справки <code>?read.table</code></p>
<p><img src="images/data-csv.png"></p>
<p>Чтобы открыть этот файл в R, можно выполнить команду:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">&quot;data/expression_3.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="at">dec =</span> <span class="st">&quot;.&quot;</span>)</span></code></pre></div>
<ul>
<li><code>file</code> — абсолютный или, как в данном случае, относительный (относительно рабочей директории) путь к файлу с данными.</li>
<li><code>header</code> — есть в файле заголовок или нет</li>
<li><code>sep</code> — разделитель столбцов</li>
<li><code>dec</code> — разделитель десятичных разрядов</li>
</ul>
<p>Есть еще одна полезная опция</p>
<ul>
<li><code>stringsAsFactors</code> — автоматически преобразовывать переменные с текстовыми значениями в факторы. По умолчанию ее значение <code>TRUE</code>, но это не всегда удобно. Сейчас мы не станем ею пользоваться, но просто будем помнить о такой возможности.</li>
</ul>
<p>После открытия файла стоит убедится, все ли правильно прочитано.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code></pre></div>
<pre class="r-output"><code>##   X        X1                X2        X3        X4       X5                X6
## 1 1 0.7814702 0.466564038544439 0.9196198 1.2080542 1.661304 0.589023300123506
## 2 2 0.9113954 0.471713563732519 1.1503507 0.8128223 1.934507 0.585117486854568
## 3 3 1.0613039 0.599890221191235 0.8434016 0.8844307 1.893101 0.624861083185558
## 4 4 0.8278565 0.495471847477093 1.0653368 0.9210217 1.884009 0.637964490016918
## 5 5 0.8043413 0.489740774633650 1.0623114 1.0106327 1.480689 0.638018474951418
## 6 6 1.0145113 0.399992860034031 0.8525728 1.2007840 1.220451 0.506429298603763
##          X7        X8
## 1 0.7734419 0.7143289
## 2 0.6315635 0.5697395
## 3 0.8040159 0.7274658
## 4 0.7560546 0.6491424
## 5 0.7421269 0.7787694
## 6 0.9793544 0.2480020
</code></pre>
<p>На первый взгляд, все выглядит хорошо, но не тут то было. Давайте проверим, правильно ли R определил классы переменных.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(dat, class)</span></code></pre></div>
<pre class="r-output"><code>##           X          X1          X2          X3          X4          X5 
##   "integer"   "numeric" "character"   "numeric"   "numeric"   "numeric" 
##          X6          X7          X8 
## "character"   "numeric"   "numeric"
</code></pre>
<p>Странным образом, столбцы <code>X2</code> и <code>X6</code> были преобразованы в факторы. Скорее всего, это произошло из-за того, что кроме цифр там встречались какие-то другие символы. В данном случае, мы точно знаем, что там должны быть только числа, поэтому принудительно преобразуем факторы в числа.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> <span class="fu">within</span>(dat, {</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>  X2 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(X2))</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>  X6 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(X6))</span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## Warning in eval(substitute(expr), e): NAs introduced by coercion

## Warning in eval(substitute(expr), e): NAs introduced by coercion</code></pre>
<p>R предупреждает нас о появлении NA. Теперь мы можем разобраться из-за чего это произошло. Отфильтруем те значения в старом датафрейме, на месте которых получились NA.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>X2[<span class="fu">is.na</span>(dat1<span class="sc">$</span>X2)]</span></code></pre></div>
<pre class="r-output"><code>## [1] "-" "-" "-" "-"
</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>X6[<span class="fu">is.na</span>(dat1<span class="sc">$</span>X6)]</span></code></pre></div>
<pre class="r-output"><code>## [1] "-" "-"
</code></pre>
<p>Видно, что в исходном файле пропущенные значения были обозначены <code>-</code>.</p>
<p>Проверим, правильно ли определены типы переменных после преобразования.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(dat1, class)</span></code></pre></div>
<pre class="r-output"><code>##         X        X1        X2        X3        X4        X5        X6        X7 
## "integer" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" 
##        X8 
## "numeric"
</code></pre>
<p>Теперь все правильно.</p>
</div>
<div id="чтение-из-архивированных-файлов" class="section level2">
<h2>Чтение из архивированных файлов</h2>
<p><code>unz()</code> позволяет извлекать файлы из архивов. В том числе, если внутри архивов они лежат в своих директориях.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="fu">unz</span>(<span class="st">&quot;./data/expression_3.zip&quot;</span>, <span class="st">&quot;expression_analysis/3.csv&quot;</span>), <span class="at">header=</span>T, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat2)</span></code></pre></div>
<pre class="r-output"><code>##   X        X1                X2        X3        X4       X5                X6
## 1 1 0.7814702 0.466564038544439 0.9196198 1.2080542 1.661304 0.589023300123506
## 2 2 0.9113954 0.471713563732519 1.1503507 0.8128223 1.934507 0.585117486854568
## 3 3 1.0613039 0.599890221191235 0.8434016 0.8844307 1.893101 0.624861083185558
## 4 4 0.8278565 0.495471847477093 1.0653368 0.9210217 1.884009 0.637964490016918
## 5 5 0.8043413 0.489740774633650 1.0623114 1.0106327 1.480689 0.638018474951418
## 6 6 1.0145113 0.399992860034031 0.8525728 1.2007840 1.220451 0.506429298603763
##          X7        X8
## 1 0.7734419 0.7143289
## 2 0.6315635 0.5697395
## 3 0.8040159 0.7274658
## 4 0.7560546 0.6491424
## 5 0.7421269 0.7787694
## 6 0.9793544 0.2480020
</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(dat2, class)</span></code></pre></div>
<pre class="r-output"><code>##           X          X1          X2          X3          X4          X5 
##   "integer"   "numeric" "character"   "numeric"   "numeric"   "numeric" 
##          X6          X7          X8 
## "character"   "numeric"   "numeric"
</code></pre>
<p>Дальше все те же самые манипуляции, что мы проделывали в прошлом разделе.</p>
</div>
<div id="чтение-файлов-excel" class="section level2">
<h2>Чтение файлов Excel</h2>
<p>Для чтения данных из файлов Excel мы будем использовать пакет <code>readxl</code> <span class="citation">(Wickham and Bryan 2019)</span>. При необходимости инсталлируйте его командой <code>install.packages("readxl")</code>.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>dat3 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">&quot;data/expression_3.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i = sheet, :
## Expecting numeric in C1450 / R1450C3: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i = sheet, :
## Expecting numeric in C1487 / R1487C3: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i = sheet, :
## Expecting numeric in C1490 / R1490C3: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i = sheet, :
## Expecting numeric in C1503 / R1503C3: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i = sheet, :
## Expecting numeric in G1514 / R1514C7: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i = sheet, :
## Expecting numeric in G1516 / R1516C7: got &#39;-&#39;</code></pre>
<pre><code>## New names:
## * `` -&gt; ...1</code></pre>
<p>В пакете <code>readxl</code> используется более совершенный алгоритм автоматического определения классов переменных. Нас предупреждают, что в некоторых переменных, которые должны быть числовыми, встретились неожиданные текстовые значения. Тем не менее, <code>read_excel</code> правильно импортирует данные, превращая <code>-</code> в <code>NA</code>.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(dat3, class)</span></code></pre></div>
<pre class="r-output"><code>##      ...1         1         2         3         4         5         6         7 
## "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" "numeric" 
##         8 
## "numeric"
</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(dat3<span class="sc">$</span><span class="st">`</span><span class="at">2</span><span class="st">`</span>))</span></code></pre></div>
<pre class="r-output"><code>## [1] 4
</code></pre>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(dat3<span class="sc">$</span><span class="st">`</span><span class="at">6</span><span class="st">`</span>))</span></code></pre></div>
<pre class="r-output"><code>## [1] 2
</code></pre>
<p>Но есть другая особенность. <code>readxl</code> пытается сохранить исходные названия переменных. В том числе пустое имя первого столбца с номерами пятен.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat3)</span></code></pre></div>
<pre class="r-output"><code>## [1] "...1" "1"    "2"    "3"    "4"    "5"    "6"    "7"    "8"
</code></pre>
<p>Мы можем создать свои собственные имена переменных.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;X&quot;</span>, <span class="fu">colnames</span>(dat3))</span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dat3) <span class="ot">&lt;-</span> new_names</span></code></pre></div>
</div>
</div>
<div id="ссылки" class="section level1 unnumbered">
<h1 class="unnumbered">Ссылки</h1>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-ihaka_r:_1998" class="csl-entry">
Ihaka, R. 1998. R: <span>Past</span> and future history. COMPUTING SCIENCE AND STATISTICS:392–396.
</div>
<div id="ref-ihaka_r:_2010" class="csl-entry">
Ihaka, R. 2010. R: <span>Lessons</span> learned, directions for the future. Joint <span>Statistical</span> <span>Meetings</span>. The Authors.
</div>
<div id="ref-kikuta_proteome_2009" class="csl-entry">
Kikuta, K., Y. Tsunehiro, A. Yoshida, N. Tochigi, S. Hirohahsi, A. Kawai, and T. Kondo. 2009. Proteome <span>Expression</span> <span>Database</span> of <span>Ewing</span> <span>Sarcoma</span>: A <span>Segment</span> of the <span>Genome</span> <span>Medicine</span> <span>Database</span> of <span>Japan</span> <span>Proteomics</span>. Journal of Proteomics &amp; Bioinformatics 02:500–504.
</div>
<div id="ref-R_Core_Team_2021" class="csl-entry">
R Core Team. 2021. R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria.
</div>
<div id="ref-rstudio_team_rstudio:_2019" class="csl-entry">
RStudio Team. 2019. <span>RStudio</span>: <span>Integrated</span> development environment for <span>R</span>. RStudio, Inc., Boston, MA, USA.
</div>
<div id="ref-Wickham_2016" class="csl-entry">
Wickham, H. 2016. ggplot2: Elegant graphics for data analysis. Springer-Verlag New York.
</div>
<div id="ref-Wickham_2019" class="csl-entry">
Wickham, H., and J. Bryan. 2019. Readxl: Read excel files.
</div>
</div>
</div>

<p><small>
  <br/>
(C) 2019-present Marina Varfolomeeva, Arina Maltseva
</small></p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
