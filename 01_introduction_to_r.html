<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Марина Варфоломеева" />


<title>Знакомство с R</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="my_styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Proteomics course</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Начало</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Конспект
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="00_introduction.html">О модуле Анализ протеомных данных</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="01_introduction_to_r.html">Знакомство с R</a>
    </li>
    <li>
      <a href="02_data_preprocessing.html">Предварительная обработка данных</a>
    </li>
    <li>
      <a href="03_classification.html">Классификация</a>
    </li>
    <li class="dropdown-header">Дифференциальная экспрессия</li>
    <li class="divider"></li>
    <li>
      <a href="protocol.html">Протокол анализа данных</a>
    </li>
  </ul>
</li>
<li>
  <a href="resources.html">Ссылки и ресурсы</a>
</li>
<li>
  <a href="coding_practices.html">Правила хорошего кода</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Знакомство с R</h1>
<h4 class="author"><em>Марина Варфоломеева</em></h4>

</div>


<style type="text/css">
.spoiler {
  visibility: hidden;
}

.spoiler::before {
  visibility: visible;
  content: "ОТВЕТ (наведите указатель, чтобы увидеть)"
}

.spoiler:hover {
  visibility: visible;
}

.spoiler:hover::before {
  display: none;
}
</style>
<hr />
<div id="---" class="section level1">
<h1>Данные к этому занятию</h1>
<ul>
<li><a href="https://varmara.github.io/proteomics/01_introduction_to_r.R">Код</a></li>
<li>Данные <span class="citation">(Kikuta et al. 2009)</span>:
<ul>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.csv">expression_3.csv</a></li>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.xlsx">expression_3.xlsx</a></li>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.zip">expression_3.zip</a></li>
</ul></li>
</ul>
<hr />
</div>
<div id="--r" class="section level1">
<h1>Как появился R</h1>
<p>R <span class="citation">(R Core Team 2018)</span> — это язык для статистического анализа и визуализации данных. Он возник как ответвление языка S/Splus, разработанного еще в 70-х годах в Bell Laboratories.</p>
<p><img src="images/Rlogo.svg" width=150px alt="R logo"></p>
<hr />
<p><a href="https://en.wikipedia.org/wiki/Ross_Ihaka">Росс Ихака</a> (Ross Ihaka) и <a href="https://en.wikipedia.org/wiki/Robert_Gentleman_(statistician)">Роберт Джентльмен</a> (Robert Gentleman), молодые ученые из университета Окленда, Новая Зеландия разработали R в 1993 году <span class="citation">(Ihaka 1998)</span>.</p>
<p><img src="images/Robert_Gentleman_and_Ross_Ihaka.png" alt="Роберт Джентльмен и Росс Ихака"></p>
<p><small>Роберт Джентльмен и Росс Ихака, <a href="https://www.stat.auckland.ac.nz/~ihaka/downloads/the-r-project.pdf">источник: Росс Ихака</a></small></p>
<hr />
<p>Сейчас Росс Ихака занимается статистикой <a href="https://www.stat.auckland.ac.nz/~ihaka/">в университете Окленда</a> (Associate Professor). В 2010 году Ихака начал работать над новым языком с целью усовершенствовать R и улучшить его быстродействие <span class="citation">(Ihaka 2010)</span>.</p>
<p><img src="images/Ihaka.jpg" alt="Росс Ихака" style="height:250px;"></p>
<p><small>Росс Ихака, <a href="http://www.waikato.ac.nz/news-events/media/2015/learning-another-language-on-kngitanga-day">источник: сайт university of Waikato</a></small></p>
<hr />
<p>Роберт Джентльмен работал как ученый и эксперт в нескольких компаниях биотехнологического и генетического профиля, и недавно стал вицепрезидентом компании 23andMe как эксперт в биоинформатике. Еще в 2001 году Роберт Джентльмен начал работать над проектом <a href="http://www.bioconductor.org/">Bioconductor</a>.</p>
<p><img src="images/Bioconductor-logo.jpg" alt="Bioconductor logo" style="width:200px;"></p>
<p><img src="images/Gentleman.jpg" alt="Роберт Джентльмен" style="height:250px;"></p>
<p><small>Роберт Джентльмен, <a href="https://www.fredhutch.org/en/news/center-news/2009/05/Gentlemen-presents-lecture.html">источник: Susie Fitzhugh</a></small></p>
</div>
<div id="rstudio--" class="section level1">
<h1>RStudio — среда разработки</h1>
<div id="-rstudio" class="section level2">
<h2>Создатели RStudio</h2>
<p>RStudio <span class="citation">(RStudio Team 2019)</span> — это свободно распространяемая среда для разработки (integrated development environment) на языке R.</p>
<p><img src="images/RStudio-logo.png"></p>
<p>RStudio была основана в 2009 году американским программистом и интернет-предпринимателем <a href="https://en.wikipedia.org/wiki/Joseph_J._Allaire">Джозефом Аллером</a> (Joseph J. Allaire). Среду RStudio можно устанавливать на компьютеры с разными операционными системами (Windows, OS X, and Linux).</p>
<p><img src="images/Jeremy_Allaire_by_Hubert_Burda_Media_on_Flickr.jpg" alt="Джозеф Аллер" style="height:250px;"></p>
<p><small>Джозеф Аллер, <a href="https://flic.kr/p/jn7JDS">источник: Hubert Burda Media on Flickr</a></small></p>
<p>Сейчас RStudio, пожалуй, самый удобный вариант среды для разработки на R. Мне кажется, что бум использования R в начале 10-х годов отчасти объясняется тем, что писать программы стало гораздо удобнее благодаря появлению среды RStudio.</p>
<p>К слову, вторая причина роста популярности R — это появление графического пакета ggplot2 <span class="citation">(Wickham 2016)</span>, написанного <a href="http://hadley.nz/">Хедли Викхемом</a> (Hadley Wickham). Этот пакет во много раз облегчил построение сложных и красивых графиков. С тех пор Хедли Викхем написал еще много полезных пакетов и сейчас работает Chief Scientist в RStudio и Adjunct Professor в университете Окленда.</p>
<p><img src="images/Wickham.jpg" alt="Хедли Викхем" style="height:250px;"></p>
<p><small>Хедли Викхем, <a href="https://twitter.com/hadleywickham">источник: Hadley Wickham</a></small></p>
<p>Для работы над этим курсом вам понадобится установить</p>
<ul>
<li><a href="http://cran.r-project.org/">R</a></li>
<li><a href="https://www.rstudio.com/products/rstudio/download/preview/">RStudio</a></li>
</ul>
</div>
<div id="-rstudio" class="section level2">
<h2>Устройство RStudio</h2>
<p><img src="images/RStudio.png" alt="RStudio"></p>
<p>Окно редактора RStudio разделено на 4 области:</p>
<ol style="list-style-type: decimal">
<li>код (зеленый прямоугольник на схеме) - это обычный текстовый редактор, в котором открывают и редактирут файлы с программами.</li>
<li>консоль/RMarkdown (оранжевый прямоугольник на схеме). На вкладке консоль можно в живом режиме выполнять команды R, если вы не хотите их сохранять в виде программы.</li>
<li>файлы/графики/пакеты/помощь/просмотр (желтый прямоугольник на схеме). На вкладке помощь можно просматривать файлы справки. На вкладке графики будут появляться графики. На вкладке файлы расположен файловый менеджер, который позволяет перемещаться по директориям вашего проекта и компьютера.</li>
<li>среда/история (и еще может быть /Git, если ваш проект под контролем версий) (синий прямоугольник на схеме). На вкладке история есть список всех выполненных команд R. На вкладке среда расположен список объектов, находящихся в памяти.</li>
</ol>
<p><img src="images/RStudio-layout.png" alt="структура RStudio"></p>
</div>
<div id="--" class="section level2">
<h2>Организация рабочего пространства</h2>
<ol style="list-style-type: decimal">
<li>Создайте папку (например, <code>Proteomics</code>), где будут храниться ВСЕ материалы курса. Например: Мы будем ее называть <strong>рабочей директорией</strong>. В эту папку помещайте ВСЕ файлы с кодом (с расширением .R).</li>
<li>Внутри папки <code>Proteomics</code> создайте папку <code>data</code>, где будут храниться все файлы с данными для анализа.</li>
</ol>
<p>В итоге у вас должно получиться примерно это:</p>
<pre><code>C:\Proteomics\
C:\Proteomics\data\</code></pre>
</div>
<div class="section level2">
<h2>Настройка</h2>
<p>Все настройки RStudio находятся меню Tools -&gt; Global Options</p>
<ul>
<li>Восстановление рабочено пространства из прошлого сеанса — это лучше отменить, т.к. обычно переменные-призраки очень мешают. На вкладке <code>General</code> убираем галочку <code>Restore .RData into workspace at startup</code>, и меняем <code>Save workspace to .RData on exit</code> - <code>Never</code>.</li>
<li>Перенос длинных строк в окне кода — это удобно. На вкладке <code>Code</code> ставим галочку рядом с опцией <code>Soft-wrap R source files</code>.</li>
</ul>
</div>
<div id="-" class="section level2">
<h2>Клавиатурные сокращения</h2>
<ul>
<li><code>Ctrl + Shift + C</code> - закомментировать/раскомментировать выделенный фрагмент кода.</li>
<li><code>Ctrl + Enter</code> - отправляет строку из текстового редактора в консоль, а если выделить несколько строк, то будет выполнен этот фрагмент кода.</li>
<li><code>Tab</code> или <code>Ctrl + Space</code> - нажмите после того как начали набирать название функции или переменной, и появится список автоподстановки. Это помогает печатать код быстро и с меньшим количеством ошибок.</li>
</ul>
<p>Автоподстановка названий функций начинает работать как только вы ввели несколько первых букв названия функции. Вы можете вызвать ее раньше, если нажмете <code>Tab</code> или <code>Ctrl + Space</code>.</p>
<p><img src="images/autocompletion.png" alt="автоподстановка названий функций в RStudio"></p>
<p>Как только вы полностью ввели название функции и скобки, RStudio автоматически ставит закрывающую скобку и показывает раздел справки Usage для этой функции.</p>
<p><img src="images/autocompletion1.png" alt="автоподстановка аргументов функций в RStudio"></p>
<p>Если вы нажмете <code>Tab</code> или <code>Ctrl + Space</code>, когда курсор находится внутри скобок, то вам покажут список аргументов этой функции с расшифровками их значений из раздела справки Arguments для этой функции.</p>
<p><img src="images/autocompletion2.png" alt="автоподстановка аргументов функций в RStudio"></p>
</div>
</div>
<div id="--" class="section level1">
<h1>Установка дополнительных пакетов</h1>
<p>R — модульная система, он состоит из пакетов. Некоторые пакеты уже установлены, другие придется устанавливать из внешнего репозитория.</p>
<p>Из центрального репозитория <code>R</code> <code>CRAN</code> пакеты можно установить при помощи функции <code>install.packages()</code>, указав имя пакета. Запустите RStudio (с правами администратора, если вы в Windows) и, для начала, установите пакеты <code>ggplot2</code> и <code>readxl</code> — они нам сегодня понадобятся.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Из репозитория CRAN</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</a></code></pre></div>
<p>Остальные пакеты мы будем устанавливать по мере необходимости.</p>
<p>Пакеты единожды устанавливаются в локальную библиотеку, затем их нужно активировать для работы один раз за сеанс.</p>
</div>
<div id="--r" class="section level1">
<h1>Основы языка R</h1>
<div id="-" class="section level2">
<h2>Математические операции</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="dv">36</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 18</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="dv">7</span> <span class="op">*</span><span class="st"> </span><span class="dv">4</span></a></code></pre></div>
<pre><code>## [1] 28</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="dv">5</span> <span class="op">^</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 25</code></pre>
<p>Для некоторых операций есть специальные функции:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="dv">27</span>)</a></code></pre></div>
<pre><code>## [1] 5.196152</code></pre>
<div id="-1" class="section level4">
<h4>Задание 1</h4>
<p>Найдите длину гипотенузы прямоугольного треугольника со сторонами 3 и 5 см.</p>
<div class="spoiler">
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="dv">3</span><span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">5</span><span class="op">^</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 5.830952</code></pre>
</div>
</div>
<div id="-2" class="section level4">
<h4>Задание 2</h4>
<p>Извлеките кубический корень из 27.</p>
<div class="spoiler">
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="dv">27</span><span class="op">^</span>(<span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">3</span>) <span class="co"># кубический корень</span></a></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
</div>
</div>
<div id="---warnings-and-errors" class="section level2">
<h2>Предупреждения и ошибки (warnings and errors)</h2>
<p>Предупреждения</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="op">-</span><span class="dv">27</span>)</a></code></pre></div>
<pre><code>## Warning in sqrt(-27): NaNs produced</code></pre>
<pre><code>## [1] NaN</code></pre>
<p>Ошибки</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">sqr</span>(<span class="dv">27</span>)</a></code></pre></div>
<pre><code>Error: could not find function &quot;sqr&quot;</code></pre>
</div>
<div id="-----r" class="section level2">
<h2>Как можно получить помощь в R</h2>
<ol style="list-style-type: decimal">
<li>В <code>RStudio</code> можно поставить курсор на название функции и нажать <code>F1</code></li>
</ol>
<p><code>sqrt()</code></p>
<ol start="2" style="list-style-type: decimal">
<li>Перед названием функции можно напечатать знак вопроса и выполнить эту строку</li>
</ol>
<p><code>?sqrt</code></p>
<ol start="3" style="list-style-type: decimal">
<li>Можно воспользоваться функцией <code>help()</code></li>
</ol>
<p><code>help(&quot;sqrt&quot;)</code></p>
<p>Все файлы справки состоят из нескольких типов разделов.</p>
<p><img src="images/helpstructureannotated.png" alt="Как устроена справка в R"></p>
<div id="-3" class="section level3">
<h3>Задание 3</h3>
<p>Что делает функция <code>round()</code>?</p>
<div class="spoiler">
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="co"># Справка</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2">?round</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="kw">help</span>(<span class="st">&quot;round&quot;</span>)</a></code></pre></div>
</div>
</div>
<div id="-4" class="section level3">
<h3>Задание 4</h3>
<p>Посмотрите в справку к функции <code>log()</code>. Какое основание логарифма используется в R по умолчанию?</p>
<div class="spoiler">
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># Справка</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2">?log</a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="kw">help</span>(<span class="st">&quot;log&quot;</span>)</a></code></pre></div>
</div>
</div>
</div>
<div id="-variables" class="section level2">
<h2>Переменные (variables)</h2>
<p>Можно сохранить результат любого вычисления или любую величину в переменной. Переменные - это такие контейнеры, в которые можно положить разные данные (и даже функции).</p>
<p>Оператор присваивания это символ стрелочки <code>&lt;-</code> Он работает справа налево, это значит, что значение выражения в его правой части присваивается объекту в левой части. Есть еще более экзотический оператор присваивания слева направо <code>-&gt;</code>, но его не рекомендуют использовать оттого, что хуже читается код.</p>
<p>Имена переменных могут содержать латинские буквы обоих регистров, символы точки . и подчеркивания _ , а так же цифры. Имена переменных должны начинаться с латинских букв. Создавайте понятные и “говорящие” имена переменных.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">num_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="dv">1024</span> <span class="op">/</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">num_<span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] 512</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="dv">1238</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span> -&gt;<span class="st"> </span>num_<span class="dv">2</span>  <span class="co"># экзотический вариант</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2">num_<span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] 3714</code></pre>
<p>Правила именования переменных</p>
<p>Просто <code>a</code> — плохо, и даже <code>b</code>, <code>с</code>, или <code>х</code>. Но в некоторых случаях название из одной буквы вполне допустимо:)</p>
<ul>
<li><code>var1</code> — плохо, но уже лучше</li>
<li><code>var_1</code> — тоже плохо, но уже лучше</li>
<li><code>shelllength</code> — говорящее, но плохо читается</li>
<li><code>shell_length</code>, <code>wing_colour</code> или <code>leg_num</code> — хорошие, говорящие, короткие, но вполне читабельные названия.</li>
</ul>
<p>Осторожно, переменные можно случайно или намеренно перезаписать. Пока что <code>num_1</code> было равно 512, но если мы присвоим переменной <code>num_1</code> другое значение — ее содержимое изменится.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">num_<span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] 512</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">num_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">num_<span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Код — это линейная последовательность действий. Переменные можно использовать только после того, как они были созданы.</p>
<p>Пример 1</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="co"># Неправильно:</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2">box_wt &lt;-<span class="st"> </span><span class="fl">1.2</span></a>
<a class="sourceLine" id="cb32-3" data-line-number="3">apples &lt;-<span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4">box <span class="op">/</span><span class="st"> </span>apples <span class="co"># ошибка. переменная box еще не была создана.</span></a>
<a class="sourceLine" id="cb32-5" data-line-number="5"><span class="co"># нужная переменная называется box_wt.</span></a>
<a class="sourceLine" id="cb32-6" data-line-number="6"></a>
<a class="sourceLine" id="cb32-7" data-line-number="7"><span class="co"># Правильно:</span></a>
<a class="sourceLine" id="cb32-8" data-line-number="8">box_wt &lt;-<span class="st"> </span><span class="fl">1.2</span></a>
<a class="sourceLine" id="cb32-9" data-line-number="9">apples &lt;-<span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb32-10" data-line-number="10">box_wt <span class="op">/</span><span class="st"> </span>apples</a></code></pre></div>
<p>Пример 2</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># Неправильно:</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">box &lt;-<span class="st"> </span><span class="fl">1.3</span></a>
<a class="sourceLine" id="cb33-3" data-line-number="3">box <span class="op">/</span><span class="st"> </span>fruits <span class="co"># ошибка. переменная fruits еще не была создана.</span></a>
<a class="sourceLine" id="cb33-4" data-line-number="4">fruits &lt;-<span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb33-5" data-line-number="5"></a>
<a class="sourceLine" id="cb33-6" data-line-number="6"><span class="co"># Правильно:</span></a>
<a class="sourceLine" id="cb33-7" data-line-number="7">box &lt;-<span class="st"> </span><span class="fl">1.3</span></a>
<a class="sourceLine" id="cb33-8" data-line-number="8">fruits &lt;-<span class="st"> </span><span class="dv">7</span></a>
<a class="sourceLine" id="cb33-9" data-line-number="9">box <span class="op">/</span><span class="st"> </span>fruits</a></code></pre></div>
<div id="-5" class="section level4">
<h4>Задание 5</h4>
<p>Переставьте строки так, чтобы код можно было выполнить без ошибки.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">distance &lt;-<span class="st"> </span><span class="dv">120</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2">speed &lt;-<span class="st"> </span>distance <span class="op">/</span><span class="st"> </span>time</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">time &lt;-<span class="st"> </span><span class="dv">6</span></a></code></pre></div>
<div class="spoiler">
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">distance &lt;-<span class="st"> </span><span class="dv">120</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2">time &lt;-<span class="st"> </span><span class="dv">6</span>                <span class="co"># сначала создаем переменную time</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3">speed &lt;-<span class="st"> </span>distance <span class="op">/</span><span class="st"> </span>time <span class="co"># только потом ее используем</span></a></code></pre></div>
</div>
</div>
<div id="-6" class="section level4">
<h4>Задание 6</h4>
<p>Ширина прямоугольника 2 см, а длина на 7 см больше. Чему равен периметр? (В решении создайте и используйте переменные <code>width</code>, <code>len</code> и <code>per</code>).</p>
<div class="spoiler">
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">width &lt;-<span class="st"> </span><span class="dv">2</span>               <span class="co"># Ширина</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2">len &lt;-<span class="st"> </span>width <span class="op">+</span><span class="st"> </span><span class="dv">7</span>         <span class="co"># Длина</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3">per &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>(width <span class="op">+</span><span class="st"> </span>len) <span class="co"># Периметр</span></a></code></pre></div>
</div>
</div>
</div>
<div id="---r" class="section level2">
<h2>Типы данных в R</h2>
<p>В R всего шесть различных типов данных. Но нам пригодятся только некоторые из них.</p>
<p><img src="images/data-types.png"></p>
<div id="-" class="section level3">
<h3>Числовые данные</h3>
<p>Мы только что их видели.</p>
<p>По умолчанию используется тип <code>numeric</code>, который позволяет хранить целые и дробные числа.</p>
<p><img src="images/data-type-numeric.png"></p>
<p>Есть еще тип <code>integer</code>, который предназначен для хранения целых чисел.</p>
<p><img src="images/data-type-integer.png"></p>
<p>И, наконец, тип <code>complex</code> используется для хранения комплексных чисел.</p>
<p><img src="images/data-type-complex.png"></p>
</div>
<div id="--character" class="section level3">
<h3>Текстовые данные (<code>character</code>)</h3>
<p>Текстовые данные используются для хранения последовательностей символов произвольной длины.</p>
<p><img src="images/data-type-character.png"></p>
<p>Каждый текстовый элемент должен быть окружен кавычками - двойными или одинарными</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="st">&quot;это текст&quot;</span></a></code></pre></div>
<pre><code>## [1] &quot;это текст&quot;</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="st">&#39;это тоже текст&#39;</span></a></code></pre></div>
<pre><code>## [1] &quot;это тоже текст&quot;</code></pre>
</div>
<div id="--logical" class="section level3">
<h3>Логические данные (<code>logical</code>)</h3>
<p>Логические данные используются для записи значений типа истина/ложь.</p>
<p><img src="images/data-type-logical.png"></p>
<p>В R определены две логические константы: <code>TRUE</code> и <code>FALSE</code></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="ot">TRUE</span> <span class="co"># истина</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="ot">FALSE</span> <span class="co"># ложь</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Для ленивых — если вы вдруг очень спешите, то можно сокращать первыми заглавными буквами. Но лучше так не делать, чтобы читать программы было легче.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">T</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">F</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="--raw" class="section level3">
<h3>Сырые данные (<code>raw</code>)</h3>
<p>Тип <code>raw</code> используется для хранения “сырых” последовательностей байтов. Это очень экзотический тип, нам он не пригодится.</p>
<p><img src="images/data-type-raw.png"></p>
</div>
<div id="--r-" class="section level3">
<h3>Встроенные в R константы</h3>
<p>В R есть несколько встроенных констант. Нам пригодятся только несколько из них.</p>
<p><img src="images/constants.png"></p>
<p><code>NA</code> — англ <em>“not available”</em>. Когда объект был, но его свойство не измерили или не записали. Что произойдет с <code>NA</code> при различных операциях?</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="ot">NA</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="ot">NA</span> <span class="op">*</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="ot">NA</span> <span class="op">/</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="ot">NA</span>)</a></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p><code>Inf</code> — <em>“infinity”</em> — бесконечность. Вы увидите <code>Inf</code> при делении чисел на ноль.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<p><code>NaN</code> — <em>“not a number”</em>. <code>NaN</code> получится при делении нуля на ноль, или если взять корень из отрицательного числа.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="dv">0</span> <span class="op">/</span><span class="st"> </span><span class="dv">0</span></a></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="op">-</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## Warning in sqrt(-1): NaNs produced</code></pre>
<pre><code>## [1] NaN</code></pre>
<p><code>NULL</code> — ноль, т.е. это значит “пусто”, “ничего нет”.</p>
</div>
</div>
</div>
<div id="----r" class="section level1">
<h1>Основные структуры данных в R</h1>
<p>Данные в R можно хранить в виде разных объектов: вектор, матрица, массив, список, датафрейм. Мы бегло рассмотрим только некоторые из них.</p>
<div id="-vectors" class="section level2">
<h2>Векторы (vectors)</h2>
<p>Основной объект R - векторы. Векторы - один объект, внутри которого может быть одно или несколько значений. Главное, чтобы эти значения относились к одному и тому же типу данных.</p>
<p><img src="images/vectors.png"></p>
<p>Вам могло показаться, что в результате выполнения следующих команд получаются просто числа:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="dv">23</span></a></code></pre></div>
<pre><code>## [1] 23</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="kw">sqrt</span>(<span class="dv">25</span>)</a></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>но на самом деле, это векторы единичной длины. В R можно легко создавать векторы большей длины.</p>
<div id="----" class="section level3">
<h3>Создание векторов из произвольных элементов</h3>
<p>Функция <code>c()</code> — от англ. <em>concatenate</em>. Функция <code>c</code> принимает несколько (произвольное количество) аргументов, разделенных запятыми, и собирает из них вектор (см. справку <code>?c</code>). Когда используете функцию <code>c()</code>, следите, чтобы было английское “си”, а не русское “эс”.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</a></code></pre></div>
<pre><code>## [1] 2 4 6</code></pre>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1"><span class="kw">c</span>(<span class="op">-</span><span class="fl">9.3</span>, <span class="dv">0</span>, <span class="fl">2.17</span>, <span class="fl">21.3</span>)</a></code></pre></div>
<pre><code>## [1] -9.30  0.00  2.17 21.30</code></pre>
<p>Векторы можно хранить в переменных для последующего использования.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">vect_num &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">16</span>)</a>
<a class="sourceLine" id="cb72-2" data-line-number="2">vect_num_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.3</span>, <span class="fl">1.7</span>, <span class="ot">NA</span>, <span class="fl">0.9</span>, <span class="fl">1.6</span>, <span class="fl">1.4</span>)</a></code></pre></div>
<p>При помощи функции <code>c()</code> можно объединять несколько векторов в один вектор.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span><span class="op">:</span><span class="dv">9</span>)</a></code></pre></div>
<pre><code>## [1] 1 1 5 6 7 8 9</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1"><span class="kw">c</span>(vect_num, vect_num_<span class="dv">1</span>)</a></code></pre></div>
<pre><code>##  [1]  2.0  4.0  6.0  8.0 10.0 12.0 14.0 16.0  1.3  1.7   NA  0.9  1.6  1.4</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1"><span class="kw">c</span>(<span class="dv">100</span>, vect_num)</a></code></pre></div>
<pre><code>## [1] 100   2   4   6   8  10  12  14  16</code></pre>
<p>Вектора могут содержать не только числа, но и логические значения, текст.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">colours &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;violet&quot;</span>)</a></code></pre></div>
<div id="-7" class="section level4">
<h4>Задание 7</h4>
<p>Создайте вектор, в котором будут буквами закодированы нуклеотиды ДНК в алфавитном порядке.</p>
<div class="spoiler">
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1"><span class="co"># Решение</span></a>
<a class="sourceLine" id="cb82-2" data-line-number="2"><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;T&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;C&quot; &quot;G&quot; &quot;T&quot;</code></pre>
</div>
</div>
<div id="-8" class="section level4">
<h4>Задание 8</h4>
<p>Создайте вектор, в котором будет три наименьших отрицательных целых числа в порядке возрастания.</p>
<div class="spoiler">
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1"><span class="co"># Решение</span></a>
<a class="sourceLine" id="cb84-2" data-line-number="2"><span class="kw">c</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dv">-2</span>, <span class="dv">-1</span>)</a></code></pre></div>
<pre><code>## [1] -3 -2 -1</code></pre>
</div>
</div>
</div>
<div id="-----" class="section level3">
<h3>Создание векторов из целых чисел подряд</h3>
<p>Оператор <code>:</code> используется для создания целочисленных векторов, где значения следуют одно за другим без пропусков</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb86-1" data-line-number="1"><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="co"># от одного до 10</span></a></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" data-line-number="1"><span class="dv">-5</span><span class="op">:</span><span class="dv">3</span> <span class="co"># от -5 до 3</span></a></code></pre></div>
<pre><code>## [1] -5 -4 -3 -2 -1  0  1  2  3</code></pre>
<div id="-9" class="section level4">
<h4>Задание 9</h4>
<p>Создайте вектор из целых чисел от 1 до 100. Как вы думаете, что означают номера в квадратных скобках в начале каждой строки?</p>
<div class="spoiler">
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="dv">1</span><span class="op">:</span><span class="dv">100</span> </a></code></pre></div>
<pre><code>##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17
##  [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34
##  [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51
##  [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68
##  [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85
##  [86]  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="co"># Номера в квадратных скобках - порядковый номер первого элемента строки</span></a></code></pre></div>
</div>
</div>
</div>
<div id="----" class="section level3">
<h3>Создание векторов из повторяющихся элементов</h3>
<p>Чтобы создавать длинные векторы из повторяющихся элементов, можно использовать функцию <code>rep()</code></p>
<p><code>?rep</code></p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1"><span class="kw">rep</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">times =</span> <span class="dv">3</span>) <span class="co"># 1 повторяется 3 раза</span></a></code></pre></div>
<pre><code>## [1] 1 1 1</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="kw">rep</span>(<span class="dt">x =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">times =</span> <span class="dv">5</span>) <span class="co"># &quot;red&quot; повторяется 5 раз</span></a></code></pre></div>
<pre><code>## [1] &quot;red&quot; &quot;red&quot; &quot;red&quot; &quot;red&quot; &quot;red&quot;</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="kw">rep</span>(<span class="dt">x =</span> <span class="ot">TRUE</span>, <span class="dt">times =</span> <span class="dv">2</span>) <span class="co"># TRUE повторяется 2 раза</span></a></code></pre></div>
<pre><code>## [1] TRUE TRUE</code></pre>
<p>Названия аргументов функций в R можно не указывать, если вы используете аргументы в том же порядке, что прописан в <code>help</code> к этой функции.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="kw">rep</span>(<span class="ot">TRUE</span>, <span class="dv">5</span>) <span class="co"># TRUE повторяется 5 раз, аргументы без названий</span></a></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE</code></pre>
<p>Создаем логический вектор, где <code>TRUE</code> повторяется 3 раза, <code>FALSE</code> 3 раза и <code>TRUE</code> 4 раза. Результат сохраняем в переменной <code>vect_log</code>.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1">vect_log &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="ot">TRUE</span>, <span class="dv">3</span>), <span class="kw">rep</span>(<span class="ot">FALSE</span>, <span class="dv">3</span>), <span class="kw">rep</span>(<span class="ot">TRUE</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb101-2" data-line-number="2">vect_log</a></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div id="-10" class="section level4">
<h4>Задание 10</h4>
<p>Создайте вектор <code>season</code> в котором названия времен года будут следовать в том же порядке, что и месяцы года, к которым они относятся (начиная с января).</p>
<div class="spoiler">
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1"><span class="co"># Без использования rep()</span></a>
<a class="sourceLine" id="cb103-2" data-line-number="2">season &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;winter&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;winter&quot;</span>)</a>
<a class="sourceLine" id="cb103-3" data-line-number="3"></a>
<a class="sourceLine" id="cb103-4" data-line-number="4"><span class="co"># С использованием rep()</span></a>
<a class="sourceLine" id="cb103-5" data-line-number="5">season &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;winter&quot;</span>, <span class="dv">2</span>), </a>
<a class="sourceLine" id="cb103-6" data-line-number="6">            <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>), <span class="dt">each =</span> <span class="dv">3</span>), </a>
<a class="sourceLine" id="cb103-7" data-line-number="7">            <span class="st">&quot;winter&quot;</span>)</a></code></pre></div>
</div>
</div>
</div>
<div id="--" class="section level3">
<h3>Адресация внутри векторов</h3>
<p>При помощи оператора <code>[]</code>, мужно обратится к некоторым элементам вектора.</p>
<p><img src="images/address-vector.png"></p>
<p>В квадратных скобках вам нужно указать порядковые номера элементов вектора, которые вы хотите добыть — один или несколько.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" data-line-number="1">vect_num <span class="co"># весь вектор</span></a></code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12 14 16</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1">vect_num[<span class="dv">1</span>] <span class="co"># первый элемент</span></a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1">vect_num[<span class="dv">3</span>] <span class="co"># 3-й элемент</span></a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<p>Если вам нужно несколько элементов, то их нужно указать в квадратных скобках их порядковые номера в виде вектора.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1">colours <span class="co"># весь вектор</span></a></code></pre></div>
<pre><code>## [1] &quot;red&quot;    &quot;orange&quot; &quot;yellow&quot; &quot;green&quot;  &quot;blue&quot;   &quot;violet&quot;</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1">colours[<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>] <span class="co"># 3-5 элемент</span></a></code></pre></div>
<pre><code>## [1] &quot;yellow&quot; &quot;green&quot;  &quot;blue&quot;</code></pre>
<p>Аналогично, если вам нужны элементы не подряд, то укажите в квадратных скобках вектор с номерами элементов, который вы создали при помощи функции <code>c()</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1">vect_num[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)]</a></code></pre></div>
<pre><code>## [1]  4  8 12</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1">colours[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">6</span>)]</a></code></pre></div>
<pre><code>## [1] &quot;red&quot;    &quot;violet&quot;</code></pre>
<p>Вектор — одномерный объект. У его элементов только один порядковый номер (индекс). Поэтому при обращении к элементам вектора нужно указывать только одно число или один вектор с адресами. R выдаст ошибку, если при обращении к вектору, вы не создавали вектор, а просто перечислили номера элементов через запятую.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1">vect_num[<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>]</a></code></pre></div>
<pre><code>Error in vect_num[2, 4, 6] : incorrect number of dimensions</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1">colours[<span class="dv">1</span>, <span class="dv">6</span>]</a></code></pre></div>
<pre><code>Error in colours[1, 6] : incorrect number of dimensions</code></pre>
<p>Если попытаться добыть из вектора номер элемента, которого там точно нет, то R выдаст <code>NA</code>, потому, что такого элемента нет</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1">vect_num[<span class="dv">198</span>]</a></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>В R есть встроенные константы, которые помогают быстро генерировать искуственные текстовые векторы (см. <code>?Constants</code>).</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1">LETTERS</a></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot;
## [18] &quot;R&quot; &quot;S&quot; &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot; &quot;Y&quot; &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" data-line-number="1">letters</a></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot;
## [18] &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" data-line-number="1">month.abb</a></code></pre></div>
<pre><code>##  [1] &quot;Jan&quot; &quot;Feb&quot; &quot;Mar&quot; &quot;Apr&quot; &quot;May&quot; &quot;Jun&quot; &quot;Jul&quot; &quot;Aug&quot; &quot;Sep&quot; &quot;Oct&quot; &quot;Nov&quot;
## [12] &quot;Dec&quot;</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1">month.name</a></code></pre></div>
<pre><code>##  [1] &quot;January&quot;   &quot;February&quot;  &quot;March&quot;     &quot;April&quot;     &quot;May&quot;      
##  [6] &quot;June&quot;      &quot;July&quot;      &quot;August&quot;    &quot;September&quot; &quot;October&quot;  
## [11] &quot;November&quot;  &quot;December&quot;</code></pre>
<div id="-11" class="section level4">
<h4>Задание 11</h4>
<p>Извлеките из вектора <code>month.name</code></p>
<ul>
<li>летние месяцы,</li>
<li>зимние месяцы.</li>
</ul>
<div class="spoiler">
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="co"># летние месяцы</span></a>
<a class="sourceLine" id="cb132-2" data-line-number="2">month.name[<span class="dv">6</span><span class="op">:</span><span class="dv">8</span>] </a></code></pre></div>
<pre><code>## [1] &quot;June&quot;   &quot;July&quot;   &quot;August&quot;</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="co"># зимние месяцы</span></a>
<a class="sourceLine" id="cb134-2" data-line-number="2">month.name[<span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">1</span>, <span class="dv">2</span>)] </a></code></pre></div>
<pre><code>## [1] &quot;December&quot; &quot;January&quot;  &quot;February&quot;</code></pre>
</div>
</div>
<div id="-12" class="section level4">
<h4>Задание 12</h4>
<p>Извлеките из вектора LETTERS буквы в таком порядке, чтобы получилось слово <code>SUN</code>.</p>
<div class="spoiler">
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1">LETTERS[<span class="kw">c</span>(<span class="dv">19</span>, <span class="dv">21</span>, <span class="dv">14</span>)]</a></code></pre></div>
<pre><code>## [1] &quot;S&quot; &quot;U&quot; &quot;N&quot;</code></pre>
</div>
</div>
</div>
<div id="--" class="section level3">
<h3>Операции с векторами</h3>
<p>Поэкспериментируем с векторами. Проверим, как работают арифметические операции</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1">vect_num <span class="op">+</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1]  4  6  8 10 12 14 16 18</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1">vect_num <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1]  4  8 12 16 20 24 28 32</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" data-line-number="1">vect_num <span class="op">*</span><span class="st"> </span>(<span class="op">-</span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1]  -4  -8 -12 -16 -20 -24 -28 -32</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb144-1" data-line-number="1">vect_num<span class="op">^</span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1]   4  16  36  64 100 144 196 256</code></pre>
<p>Арифметические операции выполняются с каждым элементом вектора — это <strong>векторизованные операции</strong>.</p>
<p>С самими векторами тоже можно делать некоторые операции.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb146-1" data-line-number="1"><span class="kw">sum</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] 72</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" data-line-number="1"><span class="kw">length</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" data-line-number="1"><span class="kw">mean</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" data-line-number="1"><span class="kw">min</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div id="-13" class="section level4">
<h4>Задание 13</h4>
<p>Создайте переменную <code>powers_of_two</code>, в которой сохраните последовательность из целочисленных степеней двойки — с первой по пятую. Используйте векторизацию. Выведите содержимое <code>powers_of_two</code> в консоль.</p>
<div class="spoiler">
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" data-line-number="1">powers_of_two &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">^</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb154-2" data-line-number="2">powers_of_two</a></code></pre></div>
<pre><code>## [1]  2  4  8 16 32</code></pre>
</div>
</div>
</div>
</div>
<div id="-matrices" class="section level2">
<h2>Матрицы (matrices)</h2>
<p>Матрицы — это двумерные объекты, похожие на таблицы, в которых хранятся данные только одного определенного типа.</p>
<p><img src="images/matrix.png"></p>
<p>Матрицы создают при помощи функции <code>matrix()</code>, которой нужно передать вектор с данными и размер будущей матрицы (число строк или столбцов).</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" data-line-number="1"><span class="co"># Матрица с числовыми данными</span></a>
<a class="sourceLine" id="cb156-2" data-line-number="2"><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">nrow =</span> <span class="dv">4</span>)</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" data-line-number="1"><span class="co"># Матрица с текстовыми данными</span></a>
<a class="sourceLine" id="cb158-2" data-line-number="2"><span class="kw">matrix</span>(<span class="dt">data =</span> LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>], <span class="dt">ncol =</span> <span class="dv">6</span>)</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,] &quot;A&quot;  &quot;C&quot;  &quot;E&quot;  &quot;G&quot;  &quot;I&quot;  &quot;K&quot; 
## [2,] &quot;B&quot;  &quot;D&quot;  &quot;F&quot;  &quot;H&quot;  &quot;J&quot;  &quot;L&quot;</code></pre>
<p>Обычно элементы записываются в матрицу столбцами</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" data-line-number="1"><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<p>Порядок заполнения матрицы элементами можно изменить, если указать <code>byrow = TRUE</code>.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" data-line-number="1"><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    2    3
## [2,]    4    5    6</code></pre>
<div id="--" class="section level3">
<h3>Адресация в матрицах</h3>
<p>Поскольку матрицы — это двумерные объекты, позиции элементов в них можно описать при помощи двух индексов, в отличие от векторов. Первым в квадратных скобках следует номер строки, вторым — номер столбца</p>
<p><img src="images/address-matrix.png"></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" data-line-number="1">mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>], <span class="dt">ncol =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb164-2" data-line-number="2">mat</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] &quot;A&quot;  &quot;E&quot;  &quot;I&quot; 
## [2,] &quot;B&quot;  &quot;F&quot;  &quot;J&quot; 
## [3,] &quot;C&quot;  &quot;G&quot;  &quot;K&quot; 
## [4,] &quot;D&quot;  &quot;H&quot;  &quot;L&quot;</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" data-line-number="1">mat[<span class="dv">3</span>, <span class="dv">2</span>]</a></code></pre></div>
<pre><code>## [1] &quot;G&quot;</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb168-1" data-line-number="1">mat[<span class="dv">1</span>, ]</a></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;E&quot; &quot;I&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" data-line-number="1">mat[, <span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot;</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" data-line-number="1">mat[, <span class="dv">-1</span>]</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,] &quot;E&quot;  &quot;I&quot; 
## [2,] &quot;F&quot;  &quot;J&quot; 
## [3,] &quot;G&quot;  &quot;K&quot; 
## [4,] &quot;H&quot;  &quot;L&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" data-line-number="1">mat[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,] &quot;A&quot;  &quot;I&quot; 
## [2,] &quot;B&quot;  &quot;J&quot; 
## [3,] &quot;C&quot;  &quot;K&quot;</code></pre>
<div id="-14" class="section level4">
<h4>Задание 14</h4>
<p>Создайте матрицу <code>calendar</code> с названиями месяцев, так, чтобы в первой строке был первый квартал.</p>
<div class="spoiler">
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb176-1" data-line-number="1">calendar &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> month.name, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb176-2" data-line-number="2">calendar</a></code></pre></div>
<pre><code>##      [,1]      [,2]       [,3]       
## [1,] &quot;January&quot; &quot;February&quot; &quot;March&quot;    
## [2,] &quot;April&quot;   &quot;May&quot;      &quot;June&quot;     
## [3,] &quot;July&quot;    &quot;August&quot;   &quot;September&quot;
## [4,] &quot;October&quot; &quot;November&quot; &quot;December&quot;</code></pre>
</div>
</div>
<div id="-15" class="section level4">
<h4>Задание 15</h4>
<p>Выберите из матрицы <code>calendar</code> месяцы третьего квартала.</p>
<div class="spoiler">
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb178-1" data-line-number="1">calendar[<span class="dv">3</span>, ]</a></code></pre></div>
<pre><code>## [1] &quot;July&quot;      &quot;August&quot;    &quot;September&quot;</code></pre>
</div>
</div>
<div id="-16" class="section level4">
<h4>Задание 16</h4>
<p>Выберите из матрицы <code>calendar</code> июнь.</p>
<div class="spoiler">
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb180-1" data-line-number="1">calendar[<span class="dv">2</span>, <span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] &quot;June&quot;</code></pre>
</div>
</div>
</div>
</div>
<div id="-arrays" class="section level2">
<h2>Массивы (arrays)</h2>
<p>Массивы — это многомерные объекты, в которых можно хранить данные одного и того же типа. По структуре они очень похожи на матрицы</p>
<p><img src="images/array.png"></p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb182-1" data-line-number="1">ar &lt;-<span class="st"> </span><span class="kw">array</span>(<span class="dt">data =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">24</span>, <span class="dt">dim =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb182-2" data-line-number="2">ar</a></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    1    3    5    7
## [2,]    2    4    6    8
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]    9   11   13   15
## [2,]   10   12   14   16
## 
## , , 3
## 
##      [,1] [,2] [,3] [,4]
## [1,]   17   19   21   23
## [2,]   18   20   22   24</code></pre>
<div id="--" class="section level3">
<h3>Адресация в массивах</h3>
<p>Адреса в массивах указываются в том же порядке: сначала идет строка, за ней столбец, затем следуют прочие измерения.</p>
<p><img src="images/address-array.png"></p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb184-1" data-line-number="1">ar[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] 19</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb186-1" data-line-number="1">ar[, , <span class="dv">1</span>]</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    3    5    7
## [2,]    2    4    6    8</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" data-line-number="1">ar[, <span class="dv">1</span>, ]</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    9   17
## [2,]    2   10   18</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1">ar[<span class="dv">1</span>, , ]</a></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    9   17
## [2,]    3   11   19
## [3,]    5   13   21
## [4,]    7   15   23</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" data-line-number="1">ar[<span class="dv">1</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] 1 3 5</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" data-line-number="1">ar[, , <span class="dv">-1</span>]</a></code></pre></div>
<pre><code>## , , 1
## 
##      [,1] [,2] [,3] [,4]
## [1,]    9   11   13   15
## [2,]   10   12   14   16
## 
## , , 2
## 
##      [,1] [,2] [,3] [,4]
## [1,]   17   19   21   23
## [2,]   18   20   22   24</code></pre>
</div>
</div>
<div id="-data-frames" class="section level2">
<h2>Датафреймы (data frames)</h2>
<p>Датафреймы — это такие двумерные таблицы, в которых столбцы могут содержать данные разных типов.</p>
<p><img src="images/data.frame.png"></p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">2014</span><span class="op">:</span><span class="dv">2017</span></a>
<a class="sourceLine" id="cb196-2" data-line-number="2">y &lt;-<span class="st"> </span>LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>]</a>
<a class="sourceLine" id="cb196-3" data-line-number="3">z &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb196-4" data-line-number="4">dat &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">year =</span> x, <span class="dt">type =</span> y, <span class="dt">test_passed =</span> z, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb196-5" data-line-number="5">dat</a></code></pre></div>
<pre><code>##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE</code></pre>
<div id="--" class="section level3">
<h3>Адресация в датафреймах</h3>
<p>Чтобы вытащить фрагмент датафрейма, можно использовать несколько вариантов действий.</p>
<p>Во-первых, оператор <code>[]</code> работает с датафреймами точно так же как и с матрицами. Поскольку датафреймы — это двумерные объекты, позиции элементов в них можно описать при помощи двух индексов. Первым в квадратных скобках <code>[]</code>, как обычно, следует номер строки, вторым — номер столбца.</p>
<p><img src="images/address-data.frame.png"></p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" data-line-number="1">dat[<span class="dv">2</span>, <span class="dv">2</span>]</a></code></pre></div>
<pre><code>## [1] &quot;B&quot;</code></pre>
<p>На месте индекса столбцов в <code>[]</code> квадратных скобках можно указать вектор имен переменных вместо их номеров.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" data-line-number="1">dat[, <span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;test_passed&quot;</span>)]</a></code></pre></div>
<pre><code>##   year test_passed
## 1 2014        TRUE
## 2 2015        TRUE
## 3 2016       FALSE
## 4 2017        TRUE</code></pre>
<p>Во-вторых, оператор <code>$</code> позволяет выбрать одну из переменных по имени</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" data-line-number="1">dat<span class="op">$</span>year</a></code></pre></div>
<pre><code>## [1] 2014 2015 2016 2017</code></pre>
<p>Можно использовать комбинацию предыдущих техник.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" data-line-number="1">dat<span class="op">$</span>test_passed[<span class="dv">3</span>]</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div id="-17" class="section level4">
<h4>Задание 17</h4>
<p>Создайте датафрейм <code>year</code>, в котором будет две переменные: <code>month</code> и <code>season</code>.</p>
<div class="spoiler">
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" data-line-number="1"><span class="co"># Названия месяцев возьмем из month.name</span></a>
<a class="sourceLine" id="cb206-2" data-line-number="2"><span class="co"># А вектор season создадим сами</span></a>
<a class="sourceLine" id="cb206-3" data-line-number="3">ss &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;winter&quot;</span>, <span class="dv">2</span>), </a>
<a class="sourceLine" id="cb206-4" data-line-number="4">            <span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>), <span class="dt">each =</span> <span class="dv">3</span>), </a>
<a class="sourceLine" id="cb206-5" data-line-number="5">            <span class="st">&quot;winter&quot;</span>)</a>
<a class="sourceLine" id="cb206-6" data-line-number="6"><span class="co"># собираем в датафрейм</span></a>
<a class="sourceLine" id="cb206-7" data-line-number="7">year &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">month =</span> month.name, <span class="dt">season =</span> ss)</a>
<a class="sourceLine" id="cb206-8" data-line-number="8">year</a></code></pre></div>
<pre><code>##        month season
## 1    January winter
## 2   February winter
## 3      March spring
## 4      April spring
## 5        May spring
## 6       June summer
## 7       July summer
## 8     August summer
## 9  September autumn
## 10   October autumn
## 11  November autumn
## 12  December winter</code></pre>
</div>
</div>
<div id="-18" class="section level4">
<h4>Задание 18</h4>
<p>Выберите из датафрейма <code>year</code></p>
<ul>
<li>строки, соответствующие весенним месяцам</li>
<li>время года, которому соответствует июнь</li>
<li>всю колонку, кодирующую сезон</li>
</ul>
<div class="spoiler">
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1"><span class="co"># - строки, соответствующие весенним месяцам</span></a>
<a class="sourceLine" id="cb208-2" data-line-number="2">year[<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>, ]</a></code></pre></div>
<pre><code>##   month season
## 3 March spring
## 4 April spring
## 5   May spring</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1"><span class="co"># - всю колонку, кодирующую сезон</span></a>
<a class="sourceLine" id="cb210-2" data-line-number="2">year<span class="op">$</span>season</a></code></pre></div>
<pre><code>##  [1] winter winter spring spring spring summer summer summer autumn autumn
## [11] autumn winter
## Levels: autumn spring summer winter</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1">year[, <span class="st">&quot;season&quot;</span>]</a></code></pre></div>
<pre><code>##  [1] winter winter spring spring spring summer summer summer autumn autumn
## [11] autumn winter
## Levels: autumn spring summer winter</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1">year[, <span class="dv">2</span>]</a></code></pre></div>
<pre><code>##  [1] winter winter spring spring spring summer summer summer autumn autumn
## [11] autumn winter
## Levels: autumn spring summer winter</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" data-line-number="1"><span class="co"># - время года, которому соответствует июнь</span></a>
<a class="sourceLine" id="cb216-2" data-line-number="2">year[<span class="dv">6</span>, <span class="dv">2</span>]</a></code></pre></div>
<pre><code>## [1] summer
## Levels: autumn spring summer winter</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" data-line-number="1">year[<span class="dv">6</span>, <span class="st">&quot;season&quot;</span>]</a></code></pre></div>
<pre><code>## [1] summer
## Levels: autumn spring summer winter</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" data-line-number="1">year<span class="op">$</span>season[<span class="dv">6</span>]</a></code></pre></div>
<pre><code>## [1] summer
## Levels: autumn spring summer winter</code></pre>
</div>
</div>
</div>
</div>
<div id="-lists" class="section level2">
<h2>Списки (lists)</h2>
<p>Списки позволяют хранить данные различных типов, и при этом разной длины.</p>
<p><img src="images/lists.png"></p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb222-1" data-line-number="1"><span class="kw">list</span>(dat, mat, vect_num, colours)</a></code></pre></div>
<pre><code>## [[1]]
##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
## 
## [[2]]
##      [,1] [,2] [,3]
## [1,] &quot;A&quot;  &quot;E&quot;  &quot;I&quot; 
## [2,] &quot;B&quot;  &quot;F&quot;  &quot;J&quot; 
## [3,] &quot;C&quot;  &quot;G&quot;  &quot;K&quot; 
## [4,] &quot;D&quot;  &quot;H&quot;  &quot;L&quot; 
## 
## [[3]]
## [1]  2  4  6  8 10 12 14 16
## 
## [[4]]
## [1] &quot;red&quot;    &quot;orange&quot; &quot;yellow&quot; &quot;green&quot;  &quot;blue&quot;   &quot;violet&quot;</code></pre>
<p>Можно создавать именованные списки</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1">lst &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">Dfr =</span> dat, <span class="dt">Matr =</span> mat, <span class="dt">Vect1 =</span> vect_num, <span class="dt">Vect2 =</span> colours)</a>
<a class="sourceLine" id="cb224-2" data-line-number="2">lst</a></code></pre></div>
<pre><code>## $Dfr
##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
## 
## $Matr
##      [,1] [,2] [,3]
## [1,] &quot;A&quot;  &quot;E&quot;  &quot;I&quot; 
## [2,] &quot;B&quot;  &quot;F&quot;  &quot;J&quot; 
## [3,] &quot;C&quot;  &quot;G&quot;  &quot;K&quot; 
## [4,] &quot;D&quot;  &quot;H&quot;  &quot;L&quot; 
## 
## $Vect1
## [1]  2  4  6  8 10 12 14 16
## 
## $Vect2
## [1] &quot;red&quot;    &quot;orange&quot; &quot;yellow&quot; &quot;green&quot;  &quot;blue&quot;   &quot;violet&quot;</code></pre>
<p>Кстати, датафрейм можно определить как список векторов одинаковой длины.</p>
<div id="--" class="section level3">
<h3>Адресация в списках</h3>
<p>Для выбора данных из списков существует несколько вариантов действий.</p>
<ol style="list-style-type: decimal">
<li>Хорошо нам знакомый оператор <code>[]</code> работает и со списками. Он позволяет извлечь элементы списков в виде списков.</li>
</ol>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1">lst[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] <span class="co"># список из двух элементов</span></a></code></pre></div>
<pre><code>## $Dfr
##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE
## 
## $Matr
##      [,1] [,2] [,3]
## [1,] &quot;A&quot;  &quot;E&quot;  &quot;I&quot; 
## [2,] &quot;B&quot;  &quot;F&quot;  &quot;J&quot; 
## [3,] &quot;C&quot;  &quot;G&quot;  &quot;K&quot; 
## [4,] &quot;D&quot;  &quot;H&quot;  &quot;L&quot;</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1">lst[<span class="dv">1</span>] <span class="co"># список из одного элемента</span></a></code></pre></div>
<pre><code>## $Dfr
##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Чтобы извлечь содержимое элемента списка, нужно использовать двойные квадратные скобки <code>[[]]</code>. С элементом списка дальше можно производить любые действия в обычном порядке.</li>
</ol>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" data-line-number="1">lst[[<span class="dv">1</span>]]</a></code></pre></div>
<pre><code>##   year type test_passed
## 1 2014    A        TRUE
## 2 2015    B        TRUE
## 3 2016    C       FALSE
## 4 2017    D        TRUE</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" data-line-number="1">lst[[<span class="dv">1</span>]]<span class="op">$</span>v2</a></code></pre></div>
<pre><code>## NULL</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>При помощи оператора <code>$</code> можно извлечь элементы из именованного списка по их именам. Дальше с этими элементами можно проводить любые манипуляции.</li>
</ol>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" data-line-number="1">lst<span class="op">$</span>Vect1</a></code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12 14 16</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1">lst<span class="op">$</span>Matr[, <span class="dv">1</span>]</a></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot;</code></pre>
</div>
</div>
</div>
<div id="-factors---" class="section level1">
<h1>Факторы (factors) — особый тип данных</h1>
<p>Факторы - это способ хранения дискретных (= категориальных данных). Например, если вы поймали 10 улиток и посмотрели их цвет. У большого количества улиток небольшое счетное количество возможных цветов.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" data-line-number="1">snail_colours &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;yellow&quot;</span>)</a>
<a class="sourceLine" id="cb238-2" data-line-number="2">snail_colours <span class="co"># это текстовый вектор.</span></a></code></pre></div>
<pre><code>## [1] &quot;red&quot;    &quot;green&quot;  &quot;green&quot;  &quot;green&quot;  &quot;yellow&quot; &quot;yellow&quot; &quot;yellow&quot; &quot;yellow&quot;</code></pre>
<p>Но цвет “желтый” обозначает одно и то же для каждой из улиток. Поэтому в целях экономии места можно записать цвета этих улиток в виде вектора, в котором численным значениям будут сопоставлены “этикетки” (называются “уровни” - levels) - названия цветов. Мы можем создать “фактор” цвет улиток.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb240-1" data-line-number="1">f_snail_alphabet &lt;-<span class="st"> </span><span class="kw">factor</span>(snail_colours)</a>
<a class="sourceLine" id="cb240-2" data-line-number="2">f_snail_alphabet</a></code></pre></div>
<pre><code>## [1] red    green  green  green  yellow yellow yellow yellow
## Levels: green red yellow</code></pre>
<p>Уровни этого фактора: <code>1 - green</code>, <code>2 - red</code>, <code>3 - yellow</code>. По умолчанию, R назначает порядок уровней по алфавиту. Можно изменить порядок (см. <code>help(&quot;factor&quot;)</code>). Нам это пригодится позже.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1">f_snail_ryg &lt;-<span class="st"> </span><span class="kw">factor</span>(snail_colours, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;green&quot;</span>))</a>
<a class="sourceLine" id="cb242-2" data-line-number="2">f_snail_ryg</a></code></pre></div>
<pre><code>## [1] red    green  green  green  yellow yellow yellow yellow
## Levels: red yellow green</code></pre>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1">f_snail_yrg &lt;-<span class="st"> </span><span class="kw">relevel</span>(f_snail_ryg, <span class="dt">ref =</span> <span class="st">&quot;yellow&quot;</span>)</a>
<a class="sourceLine" id="cb244-2" data-line-number="2">f_snail_yrg</a></code></pre></div>
<pre><code>## [1] red    green  green  green  yellow yellow yellow yellow
## Levels: yellow red green</code></pre>
<div id="-19" class="section level4">
<h4>Задание 19</h4>
<p>Из вектора <code>season</code>, созданного ранее, создайте фактор <code>season_f</code> с алфавитным порядком уровней.</p>
<div class="spoiler">
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1">season</a></code></pre></div>
<pre><code>##  [1] &quot;winter&quot; &quot;winter&quot; &quot;spring&quot; &quot;spring&quot; &quot;spring&quot; &quot;summer&quot; &quot;summer&quot;
##  [8] &quot;summer&quot; &quot;autumn&quot; &quot;autumn&quot; &quot;autumn&quot; &quot;winter&quot;</code></pre>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="co"># Если создать фактор, не указав уровни, то порядок будет алфавитный</span></a>
<a class="sourceLine" id="cb248-2" data-line-number="2">season_f &lt;-<span class="st"> </span><span class="kw">factor</span>(season)</a>
<a class="sourceLine" id="cb248-3" data-line-number="3">season_f</a></code></pre></div>
<pre><code>##  [1] winter winter spring spring spring summer summer summer autumn autumn
## [11] autumn winter
## Levels: autumn spring summer winter</code></pre>
</div>
</div>
<div id="-20" class="section level4">
<h4>Задание 20</h4>
<p>Из вектора <code>season</code>, созданного ранее, создайте фактор <code>season_f</code> , в котором уровни следуют в том же порядке, что и времена года в году.</p>
<div class="spoiler">
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1"><span class="co"># Чтобы уровни следовали в нужном порядке, это нужно специально указать</span></a>
<a class="sourceLine" id="cb250-2" data-line-number="2">season_f &lt;-<span class="st"> </span><span class="kw">factor</span>(season, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>))</a>
<a class="sourceLine" id="cb250-3" data-line-number="3">season_f</a></code></pre></div>
<pre><code>##  [1] winter winter spring spring spring summer summer summer autumn autumn
## [11] autumn winter
## Levels: winter spring summer autumn</code></pre>
</div>
</div>
<div id="-21" class="section level4">
<h4>Задание 21</h4>
<p>Из вектора <code>season</code>, созданного ранее, создайте фактор <code>season_f</code>, в котором уровни следуют в том же порядке, что и времена года в году, и называются первыми двумя буквами.</p>
<div class="spoiler">
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" data-line-number="1"><span class="co"># Можно переименовать уровни</span></a>
<a class="sourceLine" id="cb252-2" data-line-number="2">season_f &lt;-<span class="st"> </span><span class="kw">factor</span>(season, </a>
<a class="sourceLine" id="cb252-3" data-line-number="3">                   <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;winter&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;autumn&quot;</span>),</a>
<a class="sourceLine" id="cb252-4" data-line-number="4">                   <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;wi&quot;</span>, <span class="st">&quot;sp&quot;</span>, <span class="st">&quot;su&quot;</span>, <span class="st">&quot;au&quot;</span>))</a>
<a class="sourceLine" id="cb252-5" data-line-number="5">season_f</a></code></pre></div>
<pre><code>##  [1] wi wi sp sp sp su su su au au au wi
## Levels: wi sp su au</code></pre>
</div>
</div>
</div>
<div id="---" class="section level1">
<h1>Работа с логическими данными</h1>
<div id="-" class="section level2">
<h2>Операторы сравнения</h2>
<p>Операторы сравнения используются для проверки условий.</p>
<ul>
<li><code>==</code> — равно</li>
<li><code>&gt;</code> — больше</li>
<li><code>&lt;</code> — меньше</li>
<li><code>!=</code> — не равно</li>
<li><code>&gt;=</code> — больше или равно</li>
<li><code>&lt;=</code> — меньше или равно</li>
</ul>
<p>Кроме операторов сравнения есть функции, названия которых начинаются на <code>is</code> (например, <code>is.numeric()</code>, <code>is.na()</code>), оператор сопоставления <code>%in%</code> и т.п.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb254-1" data-line-number="1">?Comparison <span class="co"># справка об операторах сравнения</span></a>
<a class="sourceLine" id="cb254-2" data-line-number="2">?match      <span class="co"># о сопоставлении</span></a></code></pre></div>
<p>Пример:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1">vect_num <span class="co"># ранее созданный вектор</span></a></code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12 14 16</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" data-line-number="1">vect_num <span class="op">&gt;</span><span class="st"> </span><span class="dv">8</span></a></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1">vect_num <span class="op">!=</span><span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
<div id="-" class="section level2">
<h2>Логические операторы</h2>
<p>Логические операторы используются для того, чтобы проверить сразу несколько условий</p>
<p><code>&amp;</code> — логическое “И”:</p>
<ul>
<li><code>TRUE &amp; TRUE</code> — <code>TRUE</code></li>
<li><code>TRUE &amp; FALSE</code> — <code>FALSE</code></li>
<li><code>FALSE &amp; FALSE</code> — <code>FALSE</code></li>
</ul>
<p><code>|</code> — логическое “ИЛИ”:</p>
<ul>
<li><code>TRUE | TRUE</code> — <code>TRUE</code></li>
<li><code>TRUE | FALSE</code> — <code>TRUE</code></li>
<li><code>FALSE | FALSE</code> — <code>FALSE</code></li>
</ul>
<p><code>!</code> — логическое отрицание:</p>
<ul>
<li><code>!TRUE</code> — <code>FALSE</code></li>
<li><code>!FALSE</code> — <code>TRUE</code></li>
</ul>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" data-line-number="1">?Logic <span class="co"># Справка о логических операторах</span></a></code></pre></div>
<p>Пример:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1">vect_num <span class="co"># ранее созданный вектор</span></a></code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12 14 16</code></pre>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1">(vect_num <span class="op">!=</span><span class="st"> </span><span class="dv">2</span>) <span class="op">&amp;</span><span class="st"> </span>(vect_num <span class="op">&lt;</span><span class="st"> </span><span class="dv">8</span>)</a></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1">season <span class="co"># ранее созданный вектор</span></a></code></pre></div>
<pre><code>##  [1] &quot;winter&quot; &quot;winter&quot; &quot;spring&quot; &quot;spring&quot; &quot;spring&quot; &quot;summer&quot; &quot;summer&quot;
##  [8] &quot;summer&quot; &quot;autumn&quot; &quot;autumn&quot; &quot;autumn&quot; &quot;winter&quot;</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" data-line-number="1">season <span class="op">==</span><span class="st"> &quot;spring&quot;</span></a></code></pre></div>
<pre><code>##  [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
## [12] FALSE</code></pre>
<div id="-22" class="section level4">
<h4>Задание 22</h4>
<p>При помощи вектора <code>season</code>, создайте логический вектор, где <code>TRUE</code> стоит везде, кроме зимних месяцев.</p>
<div class="spoiler">
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" data-line-number="1">season <span class="op">!=</span><span class="st"> &quot;winter&quot;</span></a></code></pre></div>
<pre><code>##  [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
## [12] FALSE</code></pre>
</div>
</div>
</div>
<div id="-----" class="section level2">
<h2>Отбор данных с помощью логических векторов</h2>
<p>Логический вектор можно использовать внутри оператора <code>[]</code> для извлечения данных. Например, давайте извлечем месяц, который называется “June”.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb272-1" data-line-number="1">month.name[month.name <span class="op">==</span><span class="st"> &quot;June&quot;</span>]</a></code></pre></div>
<pre><code>## [1] &quot;June&quot;</code></pre>
<p>Если есть несколько сопряженных векторов, то проверку условия по одному из них вполне можно использовать для отбора значений в другом. Например, можно извлечь только весенние месяцы при помощи проверки условия. Это проще, чем вручную.</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" data-line-number="1">month.name[season <span class="op">==</span><span class="st"> &quot;spring&quot;</span>]</a></code></pre></div>
<pre><code>## [1] &quot;March&quot; &quot;April&quot; &quot;May&quot;</code></pre>
<p>Аналогичным образом, можно использовать логические векторы для фильтрации датафреймов. Отберем строки с зимними месяцами из датафрейма <code>year</code>.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" data-line-number="1">year[year<span class="op">$</span>season <span class="op">==</span><span class="st"> &quot;winter&quot;</span>, ]</a></code></pre></div>
<pre><code>##       month season
## 1   January winter
## 2  February winter
## 12 December winter</code></pre>
<p>Можем отобрать не строки целиком, а только значение переменной <code>month</code>.</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" data-line-number="1">year<span class="op">$</span>month[year<span class="op">$</span>season <span class="op">==</span><span class="st"> &quot;winter&quot;</span>]</a></code></pre></div>
<pre><code>## [1] January  February December
## 12 Levels: April August December February January July June March ... September</code></pre>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb280-1" data-line-number="1">year[year<span class="op">$</span>season <span class="op">==</span><span class="st"> &quot;winter&quot;</span>, <span class="st">&quot;month&quot;</span>]</a></code></pre></div>
<pre><code>## [1] January  February December
## 12 Levels: April August December February January July June March ... September</code></pre>
<p>Следующие несколько заданий используют данные о продолжительности сна млекопитающих (датасет <code>msleep</code> из пакета <code>ggplot2</code>). Данные можно загрузить так:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb282-1" data-line-number="1"><span class="kw">library</span>(ggplot2) <span class="co"># активируем пакет ggplot2</span></a>
<a class="sourceLine" id="cb282-2" data-line-number="2"><span class="kw">data</span>(<span class="st">&quot;msleep&quot;</span>)   <span class="co"># активируем встроенный датасет msleep</span></a></code></pre></div>
<div id="-23" class="section level4">
<h4>Задание 23</h4>
<p>Добудьте из <code>msleep</code> английские названия видов, у которых общая продолжительность сна больше 15 часов.</p>
<div class="spoiler">
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb283-1" data-line-number="1">msleep<span class="op">$</span>name[msleep<span class="op">$</span>sleep_total <span class="op">&gt;</span><span class="st"> </span><span class="dv">17</span>]</a></code></pre></div>
<pre><code>## [1] &quot;Long-nosed armadillo&quot;   &quot;North American Opossum&quot;
## [3] &quot;Big brown bat&quot;          &quot;Thick-tailed opposum&quot;  
## [5] &quot;Little brown bat&quot;       &quot;Giant armadillo&quot;</code></pre>
</div>
</div>
<div id="-24" class="section level4">
<h4>Задание 24</h4>
<p>По данным <code>msleep</code> посчитайте, какова средняя продолжительность сна хищников.</p>
<div class="spoiler">
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb285-1" data-line-number="1"><span class="kw">mean</span>(msleep<span class="op">$</span>sleep_total[msleep<span class="op">$</span>vore <span class="op">==</span><span class="st"> &quot;carni&quot;</span>], <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## [1] 10.37895</code></pre>
</div>
</div>
<div id="-25" class="section level4">
<h4>Задание 25</h4>
<p>По данным <code>msleep</code> посчитайте, какова минимальная продолжительность сна травоядных.</p>
<div class="spoiler">
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb287-1" data-line-number="1"><span class="kw">min</span>(msleep<span class="op">$</span>sleep_total[msleep<span class="op">$</span>vore <span class="op">==</span><span class="st"> &quot;herbi&quot;</span>], <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## [1] 1.9</code></pre>
</div>
</div>
<div id="-26" class="section level4">
<h4>Задание 26</h4>
<p>По данным <code>msleep</code> найдите, у какого животного минимальная продолжительность сна.</p>
<div class="spoiler">
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb289-1" data-line-number="1">msleep<span class="op">$</span>name[msleep<span class="op">$</span>sleep_total <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(msleep<span class="op">$</span>sleep_total, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)]</a></code></pre></div>
<pre><code>## [1] &quot;Giraffe&quot;</code></pre>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb291-1" data-line-number="1">msleep<span class="op">$</span>name[<span class="kw">which.min</span>(msleep<span class="op">$</span>sleep_total)]</a></code></pre></div>
<pre><code>## [1] &quot;Giraffe&quot;</code></pre>
</div>
</div>
</div>
</div>
<div id="---------" class="section level1">
<h1>Как узнать, к какому классу структур данных относится содержимое переменной?</h1>
<p>Для того, чтобы узнать к какой структуре данных относится переменная, можно воспользоваться функцией <code>class()</code></p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb293-1" data-line-number="1"><span class="kw">class</span>(f_snail_alphabet)</a></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb295-1" data-line-number="1"><span class="kw">class</span>(vect_log)</a></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb297-1" data-line-number="1"><span class="kw">class</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb299-1" data-line-number="1"><span class="kw">class</span>(colours)</a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb301-1" data-line-number="1"><span class="kw">class</span>(mat)</a></code></pre></div>
<pre><code>## [1] &quot;matrix&quot;</code></pre>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb303-1" data-line-number="1"><span class="kw">class</span>(ar)</a></code></pre></div>
<pre><code>## [1] &quot;array&quot;</code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb305-1" data-line-number="1"><span class="kw">class</span>(dat)</a></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb307-1" data-line-number="1"><span class="kw">class</span>(lst)</a></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
</div>
<div id="-coercion----." class="section level1">
<h1>Приведение (coercion), проверка принадлежности к классу/типу.</h1>
<p>Приведение (coercion) — это преобразование объекта из одного типа данных в другой. Функции для конверсии называются по единому паттерну: <code>as.имя_типа()</code>. Функции для проверки называются <code>is.имя_типа()</code>. Аналогичные функции есть для принадлежности разным классам структур данных (<code>as.имя_класса()</code>, <code>is.имя_класса()</code>).</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb309-1" data-line-number="1">vect_num</a></code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12 14 16</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb311-1" data-line-number="1"><span class="kw">as.character</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] &quot;2&quot;  &quot;4&quot;  &quot;6&quot;  &quot;8&quot;  &quot;10&quot; &quot;12&quot; &quot;14&quot; &quot;16&quot;</code></pre>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb313-1" data-line-number="1">vect_log</a></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb315-1" data-line-number="1"><span class="kw">as.numeric</span>(vect_log)</a></code></pre></div>
<pre><code>##  [1] 1 1 1 0 0 0 1 1 1 1</code></pre>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb317-1" data-line-number="1"><span class="kw">as.character</span>(vect_log)</a></code></pre></div>
<pre><code>##  [1] &quot;TRUE&quot;  &quot;TRUE&quot;  &quot;TRUE&quot;  &quot;FALSE&quot; &quot;FALSE&quot; &quot;FALSE&quot; &quot;TRUE&quot;  &quot;TRUE&quot; 
##  [9] &quot;TRUE&quot;  &quot;TRUE&quot;</code></pre>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb319-1" data-line-number="1"><span class="kw">as.character</span>(<span class="kw">as.numeric</span>(vect_log))</a></code></pre></div>
<pre><code>##  [1] &quot;1&quot; &quot;1&quot; &quot;1&quot; &quot;0&quot; &quot;0&quot; &quot;0&quot; &quot;1&quot; &quot;1&quot; &quot;1&quot; &quot;1&quot;</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb321-1" data-line-number="1"><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(vect_log))</a></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>##  [1] NA NA NA NA NA NA NA NA NA NA</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb324-1" data-line-number="1"><span class="kw">is.character</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb326-1" data-line-number="1"><span class="kw">is.numeric</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb328-1" data-line-number="1"><span class="kw">is.logical</span>(vect_log)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb330-1" data-line-number="1"><span class="kw">is.vector</span>(vect_log)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb332-1" data-line-number="1"><span class="kw">is.matrix</span>(vect_log)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb334-1" data-line-number="1"><span class="kw">as.matrix</span>(vect_log)</a></code></pre></div>
<pre><code>##        [,1]
##  [1,]  TRUE
##  [2,]  TRUE
##  [3,]  TRUE
##  [4,] FALSE
##  [5,] FALSE
##  [6,] FALSE
##  [7,]  TRUE
##  [8,]  TRUE
##  [9,]  TRUE
## [10,]  TRUE</code></pre>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb336-1" data-line-number="1"><span class="kw">is.matrix</span>(mat)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb338-1" data-line-number="1"><span class="kw">is.array</span>(dat)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb340-1" data-line-number="1"><span class="kw">as.data.frame</span>(mat)</a></code></pre></div>
<pre><code>##   V1 V2 V3
## 1  A  E  I
## 2  B  F  J
## 3  C  G  K
## 4  D  H  L</code></pre>
</div>
<div id="-functions" class="section level1">
<h1>Функции (functions)</h1>
<p>Вы уже видели массу функций, их легко узнать по скобкам после ключевого слова.</p>
<p>Познакомимся еще с несколькими и научимся писать пользовательские функции. Пользовательские функции позволяют автоматизировать повторяющиеся действия и делают код легко читаемым.</p>
<p>Вспомним, как выглядят наши векторы</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb342-1" data-line-number="1">vect_num</a></code></pre></div>
<pre><code>## [1]  2  4  6  8 10 12 14 16</code></pre>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb344-1" data-line-number="1">vect_num_<span class="dv">1</span></a></code></pre></div>
<pre><code>## [1] 1.3 1.7  NA 0.9 1.6 1.4</code></pre>
<p>Помните, мы говорили, что длину вектора можно вычислить при помощи функции <code>length()</code>, а сумму элементов вектора при помощи функции <code>sum()</code>, среднее — при помощи <code>mean()</code>.</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb346-1" data-line-number="1"><span class="kw">mean</span>(vect_num)</a></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb348-1" data-line-number="1"><span class="kw">mean</span>(vect_num_<span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Вектор <code>vect_num_1</code> содержит <code>NA</code>. Чтобы не учитывать <code>NA</code> при подсчете, нужно использовать аргумент <code>na.rm = TRUE</code>.</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb350-1" data-line-number="1"><span class="kw">mean</span>(vect_num_<span class="dv">1</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## [1] 1.38</code></pre>
<p>Попробуем написать пользовательскую функцию <code>my_mean()</code>, которая будет по умолчанию считать среднее значение элементов в векторе с учетом пропущенных значений (<code>NA</code>)</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb352-1" data-line-number="1">my_mean &lt;-<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb352-2" data-line-number="2">  <span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb352-3" data-line-number="3">  }</a></code></pre></div>
<p>В этом коде:</p>
<ul>
<li><code>my_mean</code> — переменная, название функции. В эту переменную мы складываем функцию, которую создает функция <code>function()</code></li>
<li><code>function()</code> — функция, которая делает функции. В скобках перечисляются аргументы (названия переменных, которые мы передаем в функцию, чтобы она что-то сделала с ними) <code>{ }</code> — в фигурных скобках тело функции — последовательность действий, которую нужно сделать с аргументами</li>
</ul>
<p>Иногда у функций бывает еще инструкция <code>return()</code>, которая сообщает, что именно должна возвращать наша функция. Вот как выглядела бы наша функция с этой инструкцией</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" data-line-number="1">my_mean &lt;-<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb353-2" data-line-number="2">  res &lt;-<span class="st"> </span><span class="kw">mean</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb353-3" data-line-number="3">  <span class="kw">return</span>(res)</a>
<a class="sourceLine" id="cb353-4" data-line-number="4">}</a></code></pre></div>
<p>Любую пользовательскую функцию нужно протестировать. Несмотря на то, что наша функция <code>my_mean()</code> очень простая и проверка будет выглядеть несколько натянуто, давайте проверим ее при помощи встроенной функции.</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb354-1" data-line-number="1"><span class="kw">mean</span>(vect_num_<span class="dv">1</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## [1] 1.38</code></pre>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb356-1" data-line-number="1"><span class="kw">my_mean</span>(vect_num_<span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 1.38</code></pre>
<p>Наша функция работает правильно.</p>
</div>
<div id="---" class="section level1">
<h1>Чтение данных из файлов</h1>
<div id="-" class="section level2">
<h2>Рабочая директория</h2>
<p>Напомним, как можно организовать хранение файлов:</p>
<ul>
<li><code>C:\Proteomics\</code> — файлы со скриптами .R и другие материалы курса.</li>
<li><code>C:\Proteomics\data\</code> — файлы с данными.</li>
</ul>
<p>Скачайте файлы с данными к этому занятию и поместите их в папке <code>data</code> внутри вашей рабочей директории.</p>
<ul>
<li>Данные <span class="citation">(Kikuta et al. 2009)</span>:
<ul>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.csv">expression_3.csv</a></li>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.xlsx">expression_3.xlsx</a></li>
<li><a href="https://varmara.github.io/proteomics/data/expression_3.zip">expression_3.zip</a></li>
</ul></li>
</ul>
<p>Чтобы при открытии не пришлось полностью прописывать пути к файлам, удобно попросить <code>R</code> считать <code>C:\Proteomics\</code> <strong>рабочей директорией</strong>. Тогда можно будет указывать <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%83%D1%82%D1%8C_%D0%BA_%D1%84%D0%B0%D0%B9%D0%BB%D1%83">относительный путь к файлам</a>.</p>
<p>Например, пусть вам нужно открыть файл <code>expression_3.csv</code>, лежащий в <code>C:\Proteomics\data\</code>. Если ваша рабочая директория <code>C:\Proteomics\</code>, достаточно написать <code>&quot;data/expression_3.csv&quot;</code>. Если рабочей будет какая-то другая директория, то придется писать полный путь к файлу.</p>
<p>Я рекомендую использовать относительные пути, т.к. это позволяет легче переносить файлы с одной машины на другую с сохранением структуры проекта.</p>
</div>
<div id="------working-directory" class="section level2">
<h2>Способы установки пути к рабочей директории (working directory)</h2>
<ol style="list-style-type: decimal">
<li>Выберите в меню <code>Session</code> -&gt; <code>Set working Directory...</code> -&gt; <code>To Source File Location</code> (Если вы уже сохранили код).</li>
<li>На вкладке <code>Files</code> в одной из рабочих областей <code>RStudio</code> выберите многоточие <code>...</code> -&gt; в открывшемся системном диалоге выбора файлов найдите директорию, в которой лежит ваш код и нажмите OK</li>
<li>Можно вручную прописать путь к рабочей директории в кавычках в качестве аргумента функции <code>setwd()</code> (например, <code>setwd(&quot;/media/data/proteomics&quot;)</code>).</li>
</ol>
</div>
<div id="---" class="section level2">
<h2>Чтение из текстовых файлов</h2>
<p>Один из часто используемых форматов файлов для хранения табличных данных — текстовые файлы с разделителями (<code>.csv</code>, <code>.delim</code>, <code>.txt</code>).</p>
<p>Если открыть в текстовом редакторе файл <code>expression_3.csv</code>, можно заметить, что в нем есть названия переменных в первой строке, отдельные столбцы отделены друг от друга запятыми, а десятичные разряды в числах — точками.</p>
<p>Для чтения данных из текстовых файлов с разделителями существует масса функций, но все они — это модификации одной главной функции <code>read.table()</code>. У этой функции очень много аргументов, которые позволяют настроить ее для открытия самых разных типов текстовых файлов. О назначении аргументов можно узнать в файле справки <code>?read.table</code></p>
<p><img src="images/data-csv.png"></p>
<p>Чтобы открыть этот файл в R, можно выполнить команду:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb358-1" data-line-number="1">dat &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="dt">file =</span> <span class="st">&quot;data/expression_3.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>, <span class="dt">dec =</span> <span class="st">&quot;.&quot;</span>)</a></code></pre></div>
<ul>
<li><code>file</code> — абсолютный или, как в данном случае, относительный (относительно рабочей директории) путь к файлу с данными.</li>
<li><code>header</code> — есть в файле заголовок или нет</li>
<li><code>sep</code> — разделитель столбцов</li>
<li><code>dec</code> — разделитель десятичных разрядов</li>
</ul>
<p>Есть еще одна полезная опция</p>
<ul>
<li><code>stringsAsFactors</code> — автоматически преобразовывать переменные с текстовыми значениями в факторы. По умолчанию ее значение <code>TRUE</code>, но это не всегда удобно. Сейчас мы не станем ею пользоваться, но просто будем помнить о такой возможности.</li>
</ul>
<p>После открытия файла стоит убедится, все ли правильно прочитано.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" data-line-number="1"><span class="kw">head</span>(dat)</a></code></pre></div>
<pre><code>##   X        X1                X2        X3        X4       X5
## 1 1 0.7814702 0.466564038544439 0.9196198 1.2080542 1.661304
## 2 2 0.9113954 0.471713563732519 1.1503507 0.8128223 1.934507
## 3 3 1.0613039 0.599890221191235 0.8434016 0.8844307 1.893101
## 4 4 0.8278565 0.495471847477093 1.0653368 0.9210217 1.884009
## 5 5 0.8043413 0.489740774633650 1.0623114 1.0106327 1.480689
## 6 6 1.0145113 0.399992860034031 0.8525728 1.2007840 1.220451
##                  X6        X7        X8
## 1 0.589023300123506 0.7734419 0.7143289
## 2 0.585117486854568 0.6315635 0.5697395
## 3 0.624861083185558 0.8040159 0.7274658
## 4 0.637964490016918 0.7560546 0.6491424
## 5 0.638018474951418 0.7421269 0.7787694
## 6 0.506429298603763 0.9793544 0.2480020</code></pre>
<p>На первый взгляд, все выглядит хорошо, но не тут то было. Давайте проверим, правильно ли R определил классы переменных.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1"><span class="kw">sapply</span>(dat, class)</a></code></pre></div>
<pre><code>##         X        X1        X2        X3        X4        X5        X6 
## &quot;integer&quot; &quot;numeric&quot;  &quot;factor&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot;  &quot;factor&quot; 
##        X7        X8 
## &quot;numeric&quot; &quot;numeric&quot;</code></pre>
<p>Странным образом, столбцы <code>X2</code> и <code>X6</code> были преобразованы в факторы. Скорее всего, это произошло из-за того, что кроме цифр там встречались какие-то другие символы. В данном случае, мы точно знаем, что там должны быть только числа, поэтому принудительно преобразуем факторы в числа.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb363-1" data-line-number="1">dat1 &lt;-<span class="st"> </span><span class="kw">within</span>(dat, {</a>
<a class="sourceLine" id="cb363-2" data-line-number="2">  X2 &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(X2))</a>
<a class="sourceLine" id="cb363-3" data-line-number="3">  X6 &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(X6))</a>
<a class="sourceLine" id="cb363-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb363-5" data-line-number="5">)</a></code></pre></div>
<pre><code>## Warning in eval(substitute(expr), e): NAs introduced by coercion

## Warning in eval(substitute(expr), e): NAs introduced by coercion</code></pre>
<p>R предупреждает нас о появлении NA. Теперь мы можем разобраться из-за чего это произошло. Отфильтруем те значения в старом датафрейме, на месте которых получились NA.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" data-line-number="1">dat<span class="op">$</span>X2[<span class="kw">is.na</span>(dat1<span class="op">$</span>X2)]</a></code></pre></div>
<pre><code>## [1] - - - -
## 2428 Levels: - 0.000000000000027 0.026564720945417 ... 6.065510976664640</code></pre>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" data-line-number="1">dat<span class="op">$</span>X6[<span class="kw">is.na</span>(dat1<span class="op">$</span>X6)]</a></code></pre></div>
<pre><code>## [1] - -
## 2430 Levels: - 0.007018978560024 0.019494483558559 ... 7.855426527485190</code></pre>
<p>Видно, что в исходном файле пропущенные значения были обозначены <code>-</code>.</p>
<p>Проверим, правильно ли определены типы переменных после преобразования.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" data-line-number="1"><span class="kw">sapply</span>(dat1, class)</a></code></pre></div>
<pre><code>##         X        X1        X2        X3        X4        X5        X6 
## &quot;integer&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; 
##        X7        X8 
## &quot;numeric&quot; &quot;numeric&quot;</code></pre>
<p>Теперь все правильно.</p>
</div>
<div id="---" class="section level2">
<h2>Чтение из архивированных файлов</h2>
<p><code>unz()</code> позволяет извлекать файлы из архивов. В том числе, если внутри архивов они лежат в своих директориях.</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb371-1" data-line-number="1">dat2 &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="kw">unz</span>(<span class="st">&quot;./data/expression_3.zip&quot;</span>, <span class="st">&quot;expression_analysis/3.csv&quot;</span>), <span class="dt">header=</span>T, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb371-2" data-line-number="2"><span class="kw">head</span>(dat2)</a></code></pre></div>
<pre><code>##   X        X1                X2        X3        X4       X5
## 1 1 0.7814702 0.466564038544439 0.9196198 1.2080542 1.661304
## 2 2 0.9113954 0.471713563732519 1.1503507 0.8128223 1.934507
## 3 3 1.0613039 0.599890221191235 0.8434016 0.8844307 1.893101
## 4 4 0.8278565 0.495471847477093 1.0653368 0.9210217 1.884009
## 5 5 0.8043413 0.489740774633650 1.0623114 1.0106327 1.480689
## 6 6 1.0145113 0.399992860034031 0.8525728 1.2007840 1.220451
##                  X6        X7        X8
## 1 0.589023300123506 0.7734419 0.7143289
## 2 0.585117486854568 0.6315635 0.5697395
## 3 0.624861083185558 0.8040159 0.7274658
## 4 0.637964490016918 0.7560546 0.6491424
## 5 0.638018474951418 0.7421269 0.7787694
## 6 0.506429298603763 0.9793544 0.2480020</code></pre>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" data-line-number="1"><span class="kw">sapply</span>(dat2, class)</a></code></pre></div>
<pre><code>##           X          X1          X2          X3          X4          X5 
##   &quot;integer&quot;   &quot;numeric&quot; &quot;character&quot;   &quot;numeric&quot;   &quot;numeric&quot;   &quot;numeric&quot; 
##          X6          X7          X8 
## &quot;character&quot;   &quot;numeric&quot;   &quot;numeric&quot;</code></pre>
<p>Дальше все те же самые манипуляции, что мы проделывали в прошлом разделе.</p>
</div>
<div id="--excel" class="section level2">
<h2>Чтение файлов Excel</h2>
<p>Для чтения данных из файлов Excel мы будем использовать пакет <code>readxl</code> <span class="citation">(Wickham and Bryan 2019)</span>. При необходимости инсталлируйте его командой <code>install.packages(&quot;readxl&quot;)</code>.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" data-line-number="1"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb375-2" data-line-number="2">dat3 &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;data/expression_3.xlsx&quot;</span>)</a></code></pre></div>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Expecting numeric in C1450 / R1450C3: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Expecting numeric in C1487 / R1487C3: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Expecting numeric in C1490 / R1490C3: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Expecting numeric in C1503 / R1503C3: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Expecting numeric in G1514 / R1514C7: got &#39;-&#39;</code></pre>
<pre><code>## Warning in read_fun(path = enc2native(normalizePath(path)), sheet_i =
## sheet, : Expecting numeric in G1516 / R1516C7: got &#39;-&#39;</code></pre>
<pre><code>## New names:
## * `` -&gt; `..1`</code></pre>
<p>В пакете <code>readxl</code> используется более совершенный алгоритм автоматического определения классов переменных. Нас предупреждают, что в некоторых переменных, которые должны быть числовыми, встретились неожиданные текстовые значения. Тем не менее, <code>read_excel</code> правильно импортирует данные, превращая <code>-</code> в <code>NA</code>.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" data-line-number="1"><span class="kw">sapply</span>(dat3, class)</a></code></pre></div>
<pre><code>##       ..1         1         2         3         4         5         6 
## &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; &quot;numeric&quot; 
##         7         8 
## &quot;numeric&quot; &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">is.na</span>(dat3<span class="op">$</span><span class="st">`</span><span class="dt">2</span><span class="st">`</span>))</a></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">is.na</span>(dat3<span class="op">$</span><span class="st">`</span><span class="dt">6</span><span class="st">`</span>))</a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Но есть другая особенность. <code>readxl</code> пытается сохранить исходные названия переменных. В том числе пустое имя первого столбца с номерами пятен.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" data-line-number="1"><span class="kw">colnames</span>(dat3)</a></code></pre></div>
<pre><code>## [1] &quot;..1&quot; &quot;1&quot;   &quot;2&quot;   &quot;3&quot;   &quot;4&quot;   &quot;5&quot;   &quot;6&quot;   &quot;7&quot;   &quot;8&quot;</code></pre>
<p>Мы можем создать свои собственные имена переменных.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb391-1" data-line-number="1">new_names &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;X&quot;</span>, <span class="kw">colnames</span>(dat3))</a>
<a class="sourceLine" id="cb391-2" data-line-number="2"><span class="kw">colnames</span>(dat3) &lt;-<span class="st"> </span>new_names</a></code></pre></div>
</div>
</div>
<div class="section level1 unnumbered">
<h1>Ссылки</h1>
<div id="refs" class="references">
<div id="ref-ihaka_r:_1998">
<p>Ihaka, R. 1998. R: Past and future history. COMPUTING SCIENCE AND STATISTICS:392–396.</p>
</div>
<div id="ref-ihaka_r:_2010">
<p>Ihaka, R. 2010. R: Lessons learned, directions for the future. <em>in</em> Joint Statistical Meetings. The Authors.</p>
</div>
<div id="ref-kikuta_proteome_2009">
<p>Kikuta, K., Y. Tsunehiro, A. Yoshida, N. Tochigi, S. Hirohahsi, A. Kawai, and T. Kondo. 2009. Proteome Expression Database of Ewing Sarcoma: A Segment of the Genome Medicine Database of Japan Proteomics. Journal of Proteomics &amp; Bioinformatics 02:500–504.</p>
</div>
<div id="ref-R_Core_Team_2018">
<p>R Core Team. 2018. R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria.</p>
</div>
<div id="ref-rstudio_team_rstudio:_2019">
<p>RStudio Team. 2019. RStudio: Integrated development environment for R. RStudio, Inc., Boston, MA, USA.</p>
</div>
<div id="ref-Wickham_2016">
<p>Wickham, H. 2016. Ggplot2: Elegant graphics for data analysis. Springer-Verlag New York.</p>
</div>
<div id="ref-Wickham_2019">
<p>Wickham, H., and J. Bryan. 2019. Readxl: Read excel files.</p>
</div>
</div>
</div>

<p><small>
(C) 2019 Marina Varfolomeeva, Arina Maltseva
</small></p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
